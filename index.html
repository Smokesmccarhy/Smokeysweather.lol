<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smokey's Weather Network</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&family=Oswald:wght@400;500;600;700&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
:root{
  --bg:#04090f;--surface:#071018;--panel:rgba(7,16,28,0.92);--card:rgba(10,22,40,0.8);
  --navy:#0a1628;--blue:#1565c0;--blue2:#1e88e5;--sky:#42a5f5;--cyan:#00bcd4;--teal:#00acc1;
  --gold:#f59e0b;--gold2:#fbbf24;--red:#dc2626;--orange:#ea580c;--green:#16a34a;
  --text:#e2f0ff;--dim:#6b90b8;--border:rgba(66,165,245,0.15);--border-gold:rgba(245,158,11,0.2);
  --glow-blue:0 0 20px rgba(30,136,229,0.3);--glow-gold:0 0 20px rgba(245,158,11,0.3);
  --radius:10px;--transition:all 0.25s ease;
  /* Admin theme */
  --admin-bg:#0c0a1a;--admin-surface:#120f28;--admin-card:rgba(18,15,40,0.95);
  --admin-purple:#7c3aed;--admin-purple2:#8b5cf6;--admin-pink:#ec4899;
  --admin-border:rgba(124,58,237,0.25);
}
html{scroll-behavior:smooth;}
body{background:var(--bg);color:var(--text);font-family:'Montserrat',sans-serif;min-height:100vh;overflow-x:hidden;}
a{color:inherit;text-decoration:none;}
button{cursor:pointer;font-family:'Montserrat',sans-serif;}
input,select,textarea{font-family:'Montserrat',sans-serif;}
::-webkit-scrollbar{width:6px;height:6px;}
::-webkit-scrollbar-track{background:var(--surface);}
::-webkit-scrollbar-thumb{background:var(--blue);border-radius:3px;}

/* BG */
.bg-scene{position:fixed;inset:0;z-index:0;overflow:hidden;pointer-events:none;}
.bg-grad{position:absolute;inset:0;background:radial-gradient(ellipse 80% 50% at 50% -5%,rgba(21,101,192,0.2) 0%,transparent 60%),radial-gradient(ellipse 50% 40% at 0% 100%,rgba(0,188,212,0.06) 0%,transparent 50%),linear-gradient(180deg,#04090f 0%,#071018 100%);}
.bg-cloud{position:absolute;border-radius:100px;background:rgba(66,165,245,0.025);filter:blur(60px);animation:bgdrift linear infinite;}
@keyframes bgdrift{0%{transform:translateX(-5%);}50%{transform:translateX(4%);}100%{transform:translateX(-5%);}}
.rain-wrap{position:absolute;inset:0;opacity:0;transition:opacity 2s;}
.rdrop{position:absolute;width:1px;background:linear-gradient(transparent,rgba(150,210,255,0.5));animation:rainfall linear infinite;}
@keyframes rainfall{from{transform:translateY(-60px);opacity:0.8;}to{transform:translateY(105vh);opacity:0.1;}}
.snow-wrap{position:absolute;inset:0;opacity:0;transition:opacity 2s;}
.snowflake{position:absolute;border-radius:50%;background:rgba(210,235,255,0.8);animation:snowfall linear infinite;}
@keyframes snowfall{0%{transform:translateY(-10px) translateX(0) rotate(0deg);opacity:1;}100%{transform:translateY(105vh) translateX(40px) rotate(360deg);opacity:0;}}
.lightning-flash{position:absolute;inset:0;background:rgba(200,220,255,0.1);opacity:0;}
.starfield{position:absolute;inset:0;}
.star{position:absolute;border-radius:50%;background:#fff;animation:startwink var(--d) ease-in-out infinite alternate;}
@keyframes startwink{from{opacity:var(--lo);}to{opacity:var(--hi);}}

/* HEADER */
.site-header{position:sticky;top:0;z-index:100;background:linear-gradient(90deg,rgba(4,9,15,0.98) 0%,rgba(7,16,28,0.97) 100%);border-bottom:1px solid var(--border);backdrop-filter:blur(20px);}
.header-top{display:flex;align-items:center;justify-content:space-between;padding:10px 24px;gap:16px;border-bottom:1px solid rgba(66,165,245,0.08);}
.logo{display:flex;align-items:center;gap:14px;flex-shrink:0;-webkit-tap-highlight-color:transparent;user-select:none;}
.logo-mark{width:54px;height:54px;border-radius:12px;background:linear-gradient(135deg,#1565c0,#0d47a1);display:flex;align-items:center;justify-content:center;font-size:26px;box-shadow:var(--glow-blue),inset 0 1px 0 rgba(255,255,255,0.1);animation:logopulse 4s ease-in-out infinite;position:relative;overflow:hidden;flex-shrink:0;cursor:pointer;transition:transform 0.1s;}
.logo-mark:active{transform:scale(0.92);}
.logo-mark.tap-flash{animation:tapflash 0.15s ease;} 
@keyframes tapflash{0%{background:linear-gradient(135deg,#1565c0,#0d47a1);}50%{background:linear-gradient(135deg,#7c3aed,#4f46e5);}100%{background:linear-gradient(135deg,#1565c0,#0d47a1);}}
.logo-mark::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,0.1),transparent);}
@keyframes logopulse{0%,100%{box-shadow:var(--glow-blue);}50%{box-shadow:0 0 35px rgba(30,136,229,0.5);}}
.logo-text-wrap{}
.logo-name{font-family:'Oswald',sans-serif;font-size:clamp(1.2rem,2.5vw,1.7rem);font-weight:700;letter-spacing:3px;color:#fff;line-height:1;text-shadow:0 0 20px rgba(66,165,245,0.4);}
.logo-name span{color:var(--sky);}
.logo-tagline{font-size:0.6rem;letter-spacing:4px;color:var(--dim);text-transform:uppercase;margin-top:3px;}
.header-center{display:flex;align-items:center;gap:16px;flex:1;justify-content:center;}
.live-badge{display:flex;align-items:center;gap:7px;background:rgba(220,38,38,0.12);border:1px solid rgba(220,38,38,0.35);border-radius:4px;padding:5px 12px;font-family:'Oswald',sans-serif;letter-spacing:3px;font-size:0.85rem;color:#ef4444;flex-shrink:0;}
.live-dot{width:7px;height:7px;border-radius:50%;background:#ef4444;animation:livedot 1s ease-in-out infinite;box-shadow:0 0 7px #ef4444;}
@keyframes livedot{0%,100%{opacity:1;transform:scale(1);}50%{opacity:0.25;transform:scale(0.5);}}
.alert-badge{display:none;align-items:center;gap:7px;background:rgba(234,88,12,0.12);border:1px solid rgba(234,88,12,0.4);border-radius:4px;padding:5px 12px;font-family:'Oswald',sans-serif;font-size:0.75rem;letter-spacing:2px;color:#fb923c;animation:alertpulse 1.5s ease-in-out infinite;}
.alert-badge.show{display:flex;}
@keyframes alertpulse{0%,100%{border-color:rgba(234,88,12,0.4);}50%{border-color:rgba(234,88,12,0.9);}}
.header-clock{text-align:right;flex-shrink:0;}
.clock-time{font-family:'Roboto Mono',monospace;font-size:clamp(1.2rem,2vw,1.7rem);font-weight:500;color:#fff;letter-spacing:2px;line-height:1;}
.clock-date{font-size:0.6rem;color:var(--dim);letter-spacing:2px;text-transform:uppercase;margin-top:3px;}

/* Tap counter indicator */
.tap-indicator{position:fixed;bottom:60px;right:16px;z-index:200;display:none;align-items:center;gap:8px;}
.tap-indicator.show{display:flex;}
.tap-dot{width:8px;height:8px;border-radius:50%;background:rgba(124,58,237,0.4);border:1px solid rgba(124,58,237,0.6);transition:background 0.15s;}
.tap-dot.lit{background:#8b5cf6;box-shadow:0 0 6px #8b5cf6;}

/* NAV */
.main-nav{display:flex;align-items:center;overflow-x:auto;padding:0 24px;gap:2px;scrollbar-width:none;}
.main-nav::-webkit-scrollbar{display:none;}
.nav-btn{background:transparent;border:none;color:var(--dim);font-family:'Oswald',sans-serif;font-weight:500;font-size:0.8rem;letter-spacing:2px;text-transform:uppercase;padding:12px 16px;white-space:nowrap;border-bottom:2px solid transparent;transition:var(--transition);margin-bottom:-1px;}
.nav-btn:hover{color:var(--text);}
.nav-btn.active{color:var(--sky);border-bottom-color:var(--sky);}
.nav-btn i{margin-right:6px;font-size:0.75rem;}

/* SEARCH */
.search-strip{background:rgba(7,16,28,0.9);border-bottom:1px solid var(--border);padding:10px 24px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
.search-box{display:flex;flex:1;max-width:500px;background:rgba(10,25,50,0.6);border:1px solid var(--border);border-radius:6px;overflow:hidden;transition:border-color 0.2s,box-shadow 0.2s;}
.search-box:focus-within{border-color:var(--sky);box-shadow:0 0 12px rgba(66,165,245,0.2);}
.search-box input{flex:1;background:transparent;border:none;outline:none;color:#fff;font-size:0.9rem;padding:10px 14px;letter-spacing:0.5px;}
.search-box input::placeholder{color:var(--dim);}
.search-box button{background:var(--blue2);border:none;color:#fff;padding:10px 18px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.85rem;transition:background 0.2s;}
.search-box button:hover{background:var(--blue);}
.locate-btn{background:rgba(10,25,50,0.6);border:1px solid var(--border);color:var(--sky);padding:10px 13px;border-radius:6px;font-size:0.95rem;transition:var(--transition);}
.locate-btn:hover{background:rgba(66,165,245,0.1);border-color:var(--sky);}
.unit-toggle{display:flex;background:rgba(5,12,22,0.8);border:1px solid var(--border);border-radius:6px;overflow:hidden;}
.unit-btn{background:transparent;border:none;color:var(--dim);padding:8px 16px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.85rem;transition:var(--transition);}
.unit-btn.on{background:var(--sky);color:#04090f;font-weight:600;}
.err-msg{display:none;width:100%;background:rgba(220,38,38,0.1);border:1px solid rgba(220,38,38,0.3);border-radius:6px;padding:9px 14px;color:#fca5a5;font-size:0.82rem;}
.err-msg.show{display:block;}

/* PAGES */
.page{display:none;animation:pagein 0.3s ease;}
.page.active{display:block;}
@keyframes pagein{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}

/* DASHBOARD */
.dashboard{padding:20px 24px;display:grid;grid-template-columns:1fr 300px;gap:18px;max-width:1400px;margin:0 auto;}
.conditions-hero{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:28px;position:relative;overflow:hidden;backdrop-filter:blur(12px);}
.conditions-hero::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--sky),var(--cyan),transparent);}
.conditions-hero::after{content:'';position:absolute;top:-40px;right:-40px;width:160px;height:160px;border-radius:50%;background:radial-gradient(circle,rgba(66,165,245,0.06) 0%,transparent 70%);pointer-events:none;}
.city-row{display:flex;align-items:center;gap:10px;margin-bottom:4px;}
.city-pin{color:var(--gold);font-size:0.9rem;}
.city-name{font-family:'Oswald',sans-serif;font-size:1.8rem;font-weight:600;letter-spacing:1px;color:#fff;}
.city-region{font-size:0.7rem;color:var(--dim);margin-left:auto;letter-spacing:1px;}
.data-attr{font-size:0.58rem;color:var(--dim);opacity:0.55;letter-spacing:1.5px;margin-bottom:18px;}
.main-temp-row{display:flex;align-items:flex-end;gap:18px;margin:10px 0 6px;}
.wx-icon{font-size:clamp(3.5rem,6vw,5rem);animation:wxfloat 5s ease-in-out infinite;filter:drop-shadow(0 0 12px rgba(255,255,255,0.12));}
@keyframes wxfloat{0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);}}
.temp-big{font-family:'Oswald',sans-serif;font-size:clamp(4rem,8vw,6.5rem);font-weight:700;color:#fff;line-height:1;text-shadow:0 0 30px rgba(66,165,245,0.25);}
.temp-unit-lbl{font-family:'Oswald',sans-serif;font-size:1.8rem;font-weight:300;color:var(--dim);margin-bottom:10px;}
.condition-lbl{font-family:'Oswald',sans-serif;font-size:1.3rem;letter-spacing:3px;color:var(--sky);margin-bottom:22px;}
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;}
@media(max-width:600px){.stats-grid{grid-template-columns:repeat(2,1fr);}}
.stat-card{background:rgba(0,0,0,0.25);border:1px solid rgba(66,165,245,0.09);border-radius:8px;padding:12px;text-align:center;transition:var(--transition);}
.stat-card:hover{border-color:rgba(66,165,245,0.25);background:rgba(30,80,150,0.1);}
.stat-lbl{font-size:0.58rem;color:var(--dim);letter-spacing:2px;text-transform:uppercase;margin-bottom:5px;}
.stat-val{font-family:'Oswald',sans-serif;font-size:1.15rem;font-weight:600;color:#fff;letter-spacing:0.5px;}
.stat-icon{color:var(--sky);margin-right:3px;font-size:0.75rem;}
.dash-sidebar{display:flex;flex-direction:column;gap:14px;}
.widget{background:var(--card);border:1px solid var(--border-gold);border-radius:var(--radius);padding:16px;backdrop-filter:blur(10px);}
.widget-title{font-family:'Oswald',sans-serif;font-size:0.68rem;letter-spacing:3px;text-transform:uppercase;color:var(--dim);margin-bottom:12px;display:flex;align-items:center;gap:8px;}
.widget-title::after{content:'';flex:1;height:1px;background:rgba(245,158,11,0.12);}
.feels-num{font-family:'Oswald',sans-serif;font-size:2.8rem;font-weight:700;color:#fff;line-height:1;}
.feels-desc{font-size:0.75rem;color:var(--dim);margin-top:5px;font-weight:300;}
.prog{height:5px;background:rgba(255,255,255,0.07);border-radius:3px;margin-top:12px;overflow:hidden;}
.prog-fill{height:100%;border-radius:3px;transition:width 1.2s ease;}
.prog-blue{background:linear-gradient(90deg,var(--blue),var(--sky));box-shadow:0 0 8px rgba(66,165,245,0.4);}
.prog-gold{background:linear-gradient(90deg,var(--gold),var(--gold2));box-shadow:0 0 8px rgba(245,158,11,0.4);}
.prog-teal{background:linear-gradient(90deg,var(--teal),var(--cyan));box-shadow:0 0 8px rgba(0,188,212,0.4);}
.sun-arc{height:60px;width:100%;margin:8px 0;}
.sun-arc svg{width:100%;height:100%;}
.sun-times{display:flex;justify-content:space-between;}
.sun-item{text-align:center;}
.sun-icon{font-size:1.2rem;}
.sun-time-val{font-family:'Oswald',sans-serif;font-size:0.95rem;color:#ffcc80;}
.sun-time-lbl{font-size:0.58rem;color:var(--dim);letter-spacing:1px;}
.aqi-num{font-family:'Oswald',sans-serif;font-size:2.5rem;font-weight:700;line-height:1;}
.aqi-label{font-size:0.72rem;letter-spacing:2px;margin-top:4px;}
.aqi-good{color:#4ade80;}.aqi-moderate{color:#facc15;}.aqi-unhealthy{color:#fb923c;}.aqi-bad{color:#ef4444;}
.alert-widget{background:rgba(220,38,38,0.06);border:1px solid rgba(220,38,38,0.25);display:none;}
.alert-widget.show{display:block;}
.alert-widget .widget-title{color:#fca5a5;}
.alert-count{font-family:'Oswald',sans-serif;font-size:2rem;color:#ef4444;line-height:1;}
.alert-list{margin-top:8px;}
.alert-item{font-size:0.75rem;color:#ffaaaa;padding:6px 0;border-bottom:1px solid rgba(220,38,38,0.1);display:flex;gap:8px;align-items:flex-start;font-weight:300;}
.alert-item:last-child{border-bottom:none;}
.alert-icon-sm{color:#ef4444;font-size:0.7rem;margin-top:2px;flex-shrink:0;}
.section-wrap{padding:0 24px 20px;max-width:1400px;margin:0 auto;}
.section-head{font-family:'Oswald',sans-serif;font-size:0.75rem;letter-spacing:4px;text-transform:uppercase;color:var(--dim);margin-bottom:12px;display:flex;align-items:center;gap:12px;}
.section-head::after{content:'';flex:1;height:1px;background:var(--border);}
.forecast7{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;}
@media(max-width:700px){.forecast7{grid-template-columns:repeat(4,1fr);}}
.fday{background:var(--card);border:1px solid rgba(66,165,245,0.08);border-radius:8px;padding:12px 8px;text-align:center;transition:var(--transition);}
.fday:hover,.fday.today{background:rgba(30,100,200,0.1);border-color:rgba(66,165,245,0.3);transform:translateY(-2px);}
.fday.today{border-color:var(--gold);}
.fday-name{font-family:'Oswald',sans-serif;font-size:0.7rem;letter-spacing:2px;color:var(--dim);margin-bottom:6px;}
.fday.today .fday-name{color:var(--gold);}
.fday-icon{font-size:1.6rem;margin:5px 0;}
.fday-hi{font-family:'Oswald',sans-serif;font-size:1.1rem;font-weight:600;color:#fff;}
.fday-lo{font-family:'Oswald',sans-serif;font-size:0.85rem;color:#93c5fd;font-weight:400;}
.fday-precip{font-size:0.6rem;color:#5b8db8;margin-top:4px;}
.hourly-scroll{display:flex;gap:8px;overflow-x:auto;padding-bottom:8px;scrollbar-width:none;}
.hourly-scroll::-webkit-scrollbar{display:none;}
.hour-card{flex-shrink:0;background:var(--card);border:1px solid rgba(66,165,245,0.08);border-radius:8px;padding:12px 10px;text-align:center;min-width:72px;transition:var(--transition);}
.hour-card:hover{border-color:rgba(66,165,245,0.25);}
.hour-card.now{border-color:var(--sky);background:rgba(66,165,245,0.08);}
.hour-time{font-size:0.65rem;color:var(--dim);letter-spacing:1px;margin-bottom:6px;font-family:'Roboto Mono',monospace;}
.hour-card.now .hour-time{color:var(--sky);}
.hour-icon{font-size:1.4rem;margin:4px 0;}
.hour-temp{font-family:'Oswald',sans-serif;font-size:1rem;font-weight:600;color:#fff;}
.hour-precip{font-size:0.58rem;color:#5b8db8;margin-top:3px;}

/* RADAR */
.radar-page{padding:20px 24px;max-width:1400px;margin:0 auto;}
.radar-container{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;position:relative;}
.radar-toolbar{padding:12px 16px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;border-bottom:1px solid var(--border);}
.radar-title{font-family:'Oswald',sans-serif;font-size:0.8rem;letter-spacing:3px;color:var(--dim);}
.radar-type-btn{background:rgba(10,25,50,0.6);border:1px solid var(--border);color:var(--dim);padding:6px 14px;border-radius:5px;font-family:'Oswald',sans-serif;font-size:0.75rem;letter-spacing:1px;transition:var(--transition);}
.radar-type-btn.on,.radar-type-btn:hover{background:rgba(66,165,245,0.15);border-color:var(--sky);color:var(--sky);}
.radar-frame{width:100%;height:520px;border:none;border-radius:0 0 var(--radius) var(--radius);}

/* HURRICANE */
.hurricane-page{padding:20px 24px;max-width:1400px;margin:0 auto;}
.no-storms{text-align:center;padding:60px 20px;color:var(--dim);}
.no-storms-icon{font-size:3rem;margin-bottom:14px;}
.no-storms-t{font-family:'Oswald',sans-serif;font-size:1.2rem;letter-spacing:3px;color:rgba(255,255,255,0.2);margin-bottom:8px;}
.no-storms-s{font-size:0.8rem;}
.hurricane-map-wrap{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-top:16px;}
.hurricane-map-toolbar{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;}
.hurricane-map-frame{width:100%;height:450px;border:none;}

/* ALERTS PAGE */
.alerts-page{padding:20px 24px;max-width:1400px;margin:0 auto;}
.alert-full-card{background:var(--card);border-radius:var(--radius);padding:20px 22px;margin-bottom:12px;transition:var(--transition);border-left:4px solid transparent;}
.alert-full-card:hover{transform:translateX(4px);}
.alert-extreme{border-left-color:#ef4444;border-color:rgba(239,68,68,0.2);}
.alert-severe{border-left-color:#f97316;border-color:rgba(249,115,22,0.2);}
.alert-moderate{border-left-color:#facc15;border-color:rgba(250,204,21,0.18);}
.alert-minor{border-left-color:#4ade80;border-color:rgba(74,222,128,0.18);}
.alert-full-head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:8px;}
.alert-full-title{font-family:'Oswald',sans-serif;font-size:1.1rem;letter-spacing:1px;color:#fff;}
.alert-full-sev{font-family:'Oswald',sans-serif;font-size:0.65rem;letter-spacing:3px;padding:3px 10px;border-radius:3px;}
.sev-extreme{background:rgba(239,68,68,0.15);color:#fca5a5;}
.sev-severe{background:rgba(249,115,22,0.15);color:#fdba74;}
.sev-moderate{background:rgba(250,204,21,0.12);color:#fde047;}
.sev-minor{background:rgba(74,222,128,0.12);color:#86efac;}
.alert-full-area{font-size:0.72rem;color:var(--dim);margin-bottom:8px;}
.alert-full-body{font-size:0.8rem;color:#aabbd0;line-height:1.7;font-weight:300;}
.alert-full-times{display:flex;gap:20px;margin-top:10px;font-size:0.68rem;color:var(--dim);}

/* AQ PAGE */
.aq-page{padding:20px 24px;max-width:1400px;margin:0 auto;}
.aq-hero{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:28px;display:grid;grid-template-columns:auto 1fr;gap:28px;align-items:center;margin-bottom:16px;}
@media(max-width:600px){.aq-hero{grid-template-columns:1fr;text-align:center;}}
.aq-circle{width:120px;height:120px;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;border:4px solid;position:relative;flex-shrink:0;}
.aq-circle-num{font-family:'Oswald',sans-serif;font-size:2.2rem;font-weight:700;line-height:1;}
.aq-circle-lbl{font-size:0.6rem;letter-spacing:2px;margin-top:2px;}
.aq-details-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
@media(max-width:500px){.aq-details-grid{grid-template-columns:repeat(2,1fr);}}
.aq-detail{background:rgba(0,0,0,0.2);border:1px solid rgba(66,165,245,0.08);border-radius:8px;padding:12px;text-align:center;}
.aq-detail-lbl{font-size:0.6rem;color:var(--dim);letter-spacing:2px;text-transform:uppercase;margin-bottom:5px;}
.aq-detail-val{font-family:'Oswald',sans-serif;font-size:1.1rem;font-weight:600;color:#fff;}

/* VIDEO PAGE */
.video-page{padding:20px 24px;max-width:1400px;margin:0 auto;}
.broadcast-hero{background:linear-gradient(135deg,rgba(10,25,50,0.9),rgba(5,12,22,0.95));border:1px solid var(--border);border-radius:var(--radius);padding:24px;margin-bottom:20px;display:grid;grid-template-columns:1fr auto;gap:20px;align-items:center;}
@media(max-width:600px){.broadcast-hero{grid-template-columns:1fr;}}
.broadcast-title{font-family:'Oswald',sans-serif;font-size:1.6rem;font-weight:700;letter-spacing:2px;color:#fff;margin-bottom:6px;}
.broadcast-sub{font-size:0.78rem;color:var(--dim);font-weight:300;line-height:1.6;}
.go-live-btn{background:linear-gradient(135deg,#dc2626,#b91c1c);border:none;color:#fff;padding:14px 28px;border-radius:8px;font-family:'Oswald',sans-serif;font-weight:600;letter-spacing:3px;font-size:1rem;transition:var(--transition);white-space:nowrap;box-shadow:0 4px 20px rgba(220,38,38,0.35);display:flex;align-items:center;gap:10px;}
.go-live-btn:hover{transform:translateY(-2px);box-shadow:0 6px 25px rgba(220,38,38,0.5);}
.video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(290px,1fr));gap:18px;}
.video-card{background:var(--card);border:1px solid rgba(66,165,245,0.1);border-radius:var(--radius);overflow:hidden;transition:var(--transition);}
.video-card:hover{transform:translateY(-4px);box-shadow:0 10px 30px rgba(0,0,0,0.4),0 0 0 1px rgba(66,165,245,0.2);}
.video-thumb{width:100%;aspect-ratio:16/9;background:#071018;position:relative;overflow:hidden;cursor:pointer;}
.video-thumb img,.video-thumb video{width:100%;height:100%;object-fit:cover;transition:transform 0.3s;}
.video-card:hover .video-thumb img,.video-card:hover .video-thumb video{transform:scale(1.04);}
.video-thumb-placeholder{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;color:var(--dim);background:linear-gradient(135deg,#071018,#0a1628);}
.video-play-overlay{position:absolute;inset:0;background:rgba(0,0,0,0.3);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity 0.2s;}
.video-thumb:hover .video-play-overlay{opacity:1;}
.play-circle{width:58px;height:58px;border-radius:50%;background:rgba(245,158,11,0.9);display:flex;align-items:center;justify-content:center;font-size:1.3rem;padding-left:4px;}
.video-body{padding:14px 16px;}
.video-tag-row{display:flex;align-items:center;gap:8px;margin-bottom:7px;}
.video-tag{font-family:'Oswald',sans-serif;font-size:0.62rem;letter-spacing:2px;padding:2px 8px;border-radius:3px;}
.tag-live{background:rgba(220,38,38,0.15);color:#fca5a5;border:1px solid rgba(220,38,38,0.25);}
.tag-report{background:rgba(66,165,245,0.12);color:var(--sky);border:1px solid rgba(66,165,245,0.2);}
.tag-clip{background:rgba(245,158,11,0.1);color:var(--gold);border:1px solid rgba(245,158,11,0.2);}
.tag-upload{background:rgba(74,222,128,0.1);color:#86efac;border:1px solid rgba(74,222,128,0.2);}
.video-date{font-size:0.62rem;color:var(--dim);margin-left:auto;}
.video-title{font-family:'Oswald',sans-serif;font-size:1.05rem;color:#fff;margin-bottom:5px;}
.video-desc{font-size:0.76rem;color:var(--dim);font-weight:300;line-height:1.5;margin-bottom:12px;}
.video-actions{display:flex;gap:8px;}
.v-act-btn{flex:1;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.07);color:var(--dim);border-radius:5px;padding:7px;font-family:'Oswald',sans-serif;letter-spacing:1px;font-size:0.7rem;transition:var(--transition);}
.v-act-btn:hover{color:#fff;border-color:rgba(255,255,255,0.15);}
.v-act-btn.del:hover{color:#fca5a5;border-color:rgba(220,38,38,0.3);}
.add-video-btn{background:linear-gradient(135deg,var(--gold),var(--gold2));border:none;color:#04090f;padding:11px 22px;border-radius:6px;font-family:'Oswald',sans-serif;font-weight:700;letter-spacing:3px;font-size:0.9rem;transition:var(--transition);box-shadow:0 4px 15px rgba(245,158,11,0.25);}
.add-video-btn:hover{transform:translateY(-2px);box-shadow:0 6px 22px rgba(245,158,11,0.4);}
.video-form-wrap{background:var(--card);border:1px solid var(--border-gold);border-radius:var(--radius);padding:22px 26px;margin-bottom:20px;display:none;animation:pagein 0.3s ease;}
.video-form-wrap.open{display:block;}
.form-grid-2{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
@media(max-width:600px){.form-grid-2{grid-template-columns:1fr;}}
.fg-full{grid-column:1/-1;}
.form-lbl{font-size:0.63rem;letter-spacing:2px;text-transform:uppercase;color:var(--dim);margin-bottom:6px;display:block;}
.form-inp,.form-sel,.form-ta{width:100%;background:rgba(10,25,50,0.6);border:1px solid var(--border);border-radius:5px;color:#fff;padding:10px 13px;font-size:0.88rem;outline:none;transition:border-color 0.2s;font-family:'Montserrat',sans-serif;}
.form-inp:focus,.form-sel:focus,.form-ta:focus{border-color:var(--sky);}
.form-sel option{background:#071018;}
.form-ta{resize:vertical;min-height:70px;}
.form-actions-row{display:flex;gap:10px;margin-top:14px;}
.form-save-btn{background:var(--blue2);border:none;color:#fff;padding:10px 22px;border-radius:5px;font-family:'Oswald',sans-serif;letter-spacing:3px;font-size:0.9rem;transition:var(--transition);}
.form-save-btn:hover{background:var(--blue);}
.form-cancel-btn{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);color:var(--dim);padding:10px 18px;border-radius:5px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.85rem;transition:var(--transition);}
.form-cancel-btn:hover{color:#fff;}
.video-empty{text-align:center;padding:60px 20px;border:2px dashed rgba(66,165,245,0.12);border-radius:12px;display:none;}
.video-empty.show{display:block;}
.video-empty-icon{font-size:3rem;margin-bottom:12px;}
.video-empty-t{font-family:'Oswald',sans-serif;font-size:1.2rem;letter-spacing:3px;color:rgba(255,255,255,0.2);margin-bottom:8px;}
.video-empty-s{font-size:0.78rem;color:var(--dim);}

/* VIDEO MODAL */
.video-modal{position:fixed;inset:0;background:rgba(0,0,0,0.92);z-index:400;display:none;align-items:center;justify-content:center;padding:20px;}
.video-modal.open{display:flex;}
.video-modal-inner{background:#04090f;border:1px solid var(--border);border-radius:12px;max-width:900px;width:100%;overflow:hidden;position:relative;}
.video-modal-close{position:absolute;top:12px;right:14px;background:rgba(255,255,255,0.07);border:none;color:#fff;width:32px;height:32px;border-radius:50%;font-size:1rem;z-index:2;transition:var(--transition);}
.video-modal-close:hover{background:rgba(220,38,38,0.4);}
.video-modal-frame{width:100%;aspect-ratio:16/9;}
.video-modal-frame iframe,.video-modal-frame video{width:100%;height:100%;border:none;display:block;}

/* NEWS PAGE */
.news-page{padding:20px 24px;max-width:1400px;margin:0 auto;}
.news-grid{display:grid;grid-template-columns:2fr 1fr;gap:20px;}
@media(max-width:800px){.news-grid{grid-template-columns:1fr;}}
.news-feed{display:flex;flex-direction:column;gap:14px;}
.news-card{background:var(--card);border:1px solid rgba(66,165,245,0.1);border-radius:var(--radius);padding:18px 20px;transition:var(--transition);display:flex;gap:16px;align-items:flex-start;}
.news-card:hover{border-color:rgba(66,165,245,0.25);transform:translateX(4px);}
.news-cat-icon{font-size:1.8rem;flex-shrink:0;margin-top:2px;}
.news-cat-tag{font-family:'Oswald',sans-serif;font-size:0.62rem;letter-spacing:3px;color:var(--sky);text-transform:uppercase;margin-bottom:5px;}
.news-headline{font-family:'Oswald',sans-serif;font-size:1.05rem;font-weight:600;color:#fff;margin-bottom:6px;line-height:1.3;}
.news-snippet{font-size:0.78rem;color:var(--dim);font-weight:300;line-height:1.6;margin-bottom:8px;}
.news-meta{font-size:0.62rem;color:var(--dim);opacity:0.7;display:flex;gap:14px;}
.news-sidebar{display:flex;flex-direction:column;gap:14px;}
.trending-box{background:var(--card);border:1px solid var(--border-gold);border-radius:var(--radius);padding:16px;}
.trending-item{display:flex;gap:12px;padding:10px 0;border-bottom:1px solid rgba(66,165,245,0.07);align-items:flex-start;}
.trending-item:last-child{border-bottom:none;}
.trending-num{font-family:'Oswald',sans-serif;font-size:1.2rem;font-weight:700;color:rgba(66,165,245,0.3);min-width:24px;line-height:1.2;}
.trending-text{font-size:0.78rem;color:var(--dim);font-weight:300;line-height:1.5;}

/* TICKER */
.site-ticker{background:rgba(4,9,15,0.98);border-top:1px solid rgba(66,165,245,0.12);height:34px;display:flex;align-items:center;overflow:hidden;flex-shrink:0;position:sticky;bottom:0;z-index:50;}
.ticker-lbl{flex-shrink:0;background:var(--blue2);color:#fff;font-family:'Oswald',sans-serif;font-weight:700;font-size:0.72rem;letter-spacing:2px;height:100%;display:flex;align-items:center;padding:0 14px;}
.ticker-scroll-wrap{overflow:hidden;flex:1;}
.ticker-text{white-space:nowrap;animation:tickscroll 50s linear infinite;font-size:0.75rem;color:#8aaec8;letter-spacing:0.5px;font-weight:300;}
@keyframes tickscroll{0%{transform:translateX(100%);}100%{transform:translateX(-100%);}}
.t-sep{display:inline-block;margin:0 20px;color:var(--gold);font-weight:700;}

/* LOADER */
.site-loader{position:fixed;inset:0;background:rgba(4,9,15,0.96);z-index:900;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;transition:opacity 0.5s;}
.site-loader.gone{opacity:0;pointer-events:none;}
.loader-ring{width:54px;height:54px;border:3px solid rgba(66,165,245,0.12);border-top-color:var(--sky);border-radius:50%;animation:spin 0.8s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}
.loader-text{font-family:'Oswald',sans-serif;font-size:0.85rem;letter-spacing:5px;color:var(--dim);text-transform:uppercase;}
.loader-logo{font-family:'Oswald',sans-serif;font-size:1.3rem;letter-spacing:4px;color:#fff;font-weight:700;}
.loader-logo span{color:var(--sky);}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ADMIN PORTAL ‚Äî FULL STYLES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

/* Admin PIN Gate */
.admin-pin-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.97);z-index:1000;display:none;align-items:center;justify-content:center;backdrop-filter:blur(20px);}
.admin-pin-overlay.open{display:flex;}
.admin-pin-box{background:var(--admin-surface);border:1px solid var(--admin-border);border-radius:20px;padding:40px;max-width:420px;width:90%;text-align:center;position:relative;overflow:hidden;}
.admin-pin-box::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:conic-gradient(from 0deg,transparent 0deg,rgba(124,58,237,0.04) 60deg,transparent 120deg);animation:adminbgspin 8s linear infinite;pointer-events:none;}
@keyframes adminbgspin{to{transform:rotate(360deg);}}
.admin-pin-glow{position:absolute;top:-30px;left:50%;transform:translateX(-50%);width:120px;height:120px;background:radial-gradient(circle,rgba(124,58,237,0.3),transparent 70%);pointer-events:none;}
.admin-pin-icon{font-size:2.8rem;margin-bottom:12px;position:relative;}
.admin-pin-title{font-family:'Oswald',sans-serif;font-size:1.5rem;letter-spacing:4px;color:#fff;margin-bottom:4px;position:relative;}
.admin-pin-sub{font-size:0.72rem;color:rgba(139,92,246,0.7);letter-spacing:3px;margin-bottom:28px;position:relative;}
.pin-display{display:flex;gap:8px;justify-content:center;margin-bottom:20px;flex-wrap:wrap;position:relative;}
.pin-dot{width:14px;height:14px;border-radius:50%;border:2px solid rgba(124,58,237,0.4);background:transparent;transition:all 0.15s;}
.pin-dot.filled{background:var(--admin-purple);border-color:var(--admin-purple);box-shadow:0 0 8px rgba(124,58,237,0.6);}
.pin-dot.error{background:#ef4444;border-color:#ef4444;box-shadow:0 0 8px rgba(239,68,68,0.6);animation:pinshake 0.3s ease;}
@keyframes pinshake{0%,100%{transform:translateX(0);}25%{transform:translateX(-4px);}75%{transform:translateX(4px);}}
.pin-numpad{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px;position:relative;}
.pin-key{background:rgba(124,58,237,0.08);border:1px solid rgba(124,58,237,0.2);color:#fff;border-radius:12px;padding:16px;font-family:'Oswald',sans-serif;font-size:1.3rem;font-weight:600;transition:all 0.12s;letter-spacing:1px;}
.pin-key:hover{background:rgba(124,58,237,0.2);border-color:rgba(124,58,237,0.5);transform:scale(1.04);}
.pin-key:active{transform:scale(0.96);}
.pin-key.del{font-size:1rem;color:rgba(239,68,68,0.8);}
.pin-key.zero{grid-column:2;}
.pin-err-msg{font-size:0.75rem;color:#fca5a5;margin-bottom:12px;height:18px;position:relative;}
.pin-lockout-msg{font-size:0.75rem;color:#f97316;margin-bottom:10px;display:none;}
.pin-lockout-msg.show{display:block;}
.pin-cancel{background:transparent;border:1px solid rgba(255,255,255,0.1);color:rgba(255,255,255,0.4);padding:10px 24px;border-radius:8px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.8rem;transition:var(--transition);position:relative;}
.pin-cancel:hover{color:#fff;border-color:rgba(255,255,255,0.3);}

/* Admin Portal */
.admin-portal{position:fixed;inset:0;background:var(--admin-bg);z-index:999;display:none;flex-direction:column;animation:adminSlideIn 0.4s cubic-bezier(0.16,1,0.3,1);}
.admin-portal.open{display:flex;}
@keyframes adminSlideIn{from{transform:translateY(40px);opacity:0;}to{transform:translateY(0);opacity:1;}}

/* Admin Header */
.admin-header{background:rgba(12,10,26,0.98);border-bottom:1px solid var(--admin-border);padding:0 24px;display:flex;align-items:center;gap:16px;height:60px;flex-shrink:0;}
.admin-logo{display:flex;align-items:center;gap:10px;font-family:'Oswald',sans-serif;font-size:1rem;letter-spacing:3px;color:#fff;}
.admin-logo-badge{width:32px;height:32px;border-radius:8px;background:linear-gradient(135deg,var(--admin-purple),var(--admin-pink));display:flex;align-items:center;justify-content:center;font-size:0.9rem;box-shadow:0 0 16px rgba(124,58,237,0.4);}
.admin-logo span{color:var(--admin-purple2);}
.admin-tabs{display:flex;gap:2px;flex:1;overflow-x:auto;scrollbar-width:none;}
.admin-tabs::-webkit-scrollbar{display:none;}
.admin-tab{background:transparent;border:none;color:rgba(139,92,246,0.5);font-family:'Oswald',sans-serif;font-size:0.75rem;letter-spacing:2px;padding:10px 16px;border-bottom:2px solid transparent;white-space:nowrap;transition:var(--transition);margin-bottom:-1px;}
.admin-tab:hover{color:var(--admin-purple2);}
.admin-tab.active{color:var(--admin-purple2);border-bottom-color:var(--admin-purple2);}
.admin-tab i{margin-right:6px;}
.admin-close-btn{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);color:#ef4444;padding:8px 16px;border-radius:6px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.75rem;white-space:nowrap;transition:var(--transition);}
.admin-close-btn:hover{background:rgba(239,68,68,0.2);}

/* Admin Body */
.admin-body{flex:1;display:grid;grid-template-columns:220px 1fr;overflow:hidden;}
@media(max-width:768px){.admin-body{grid-template-columns:1fr;}}

/* Admin Sidebar */
.admin-sidebar{background:rgba(12,10,26,0.7);border-right:1px solid var(--admin-border);padding:20px 0;overflow-y:auto;display:flex;flex-direction:column;gap:4px;}
@media(max-width:768px){.admin-sidebar{display:none;}}
.admin-nav-section{font-size:0.58rem;letter-spacing:3px;color:rgba(139,92,246,0.4);padding:14px 16px 6px;text-transform:uppercase;}
.admin-nav-item{display:flex;align-items:center;gap:10px;padding:10px 16px;color:rgba(139,92,246,0.6);font-size:0.8rem;font-weight:500;transition:var(--transition);border-left:2px solid transparent;cursor:pointer;}
.admin-nav-item:hover{color:var(--admin-purple2);background:rgba(124,58,237,0.06);}
.admin-nav-item.active{color:var(--admin-purple2);background:rgba(124,58,237,0.1);border-left-color:var(--admin-purple2);}
.admin-nav-item i{font-size:0.85rem;width:16px;text-align:center;}

/* Admin Content */
.admin-content{overflow-y:auto;padding:24px;}
.admin-panel{display:none;}
.admin-panel.active{display:block;animation:pagein 0.3s ease;}
.admin-section-title{font-family:'Oswald',sans-serif;font-size:0.75rem;letter-spacing:4px;color:rgba(139,92,246,0.6);text-transform:uppercase;margin-bottom:16px;display:flex;align-items:center;gap:12px;}
.admin-section-title::after{content:'';flex:1;height:1px;background:var(--admin-border);}

/* Admin Cards */
.admin-card{background:var(--admin-card);border:1px solid var(--admin-border);border-radius:12px;padding:20px;margin-bottom:16px;}
.admin-card-title{font-family:'Oswald',sans-serif;font-size:0.85rem;letter-spacing:2px;color:#fff;margin-bottom:14px;display:flex;align-items:center;gap:8px;}
.admin-card-title i{color:var(--admin-purple2);}

/* Admin Stats Row */
.admin-stats-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:20px;}
.admin-stat{background:rgba(124,58,237,0.06);border:1px solid rgba(124,58,237,0.15);border-radius:10px;padding:16px;text-align:center;}
.admin-stat-val{font-family:'Oswald',sans-serif;font-size:1.8rem;font-weight:700;color:#fff;line-height:1;}
.admin-stat-lbl{font-size:0.6rem;color:rgba(139,92,246,0.6);letter-spacing:2px;text-transform:uppercase;margin-top:4px;}
.admin-stat-icon{font-size:1.2rem;margin-bottom:8px;}

/* Admin Form Elements */
.admin-form-row{margin-bottom:14px;}
.admin-lbl{font-size:0.62rem;letter-spacing:2px;text-transform:uppercase;color:rgba(139,92,246,0.7);margin-bottom:6px;display:block;}
.admin-inp,.admin-sel,.admin-ta{width:100%;background:rgba(124,58,237,0.06);border:1px solid rgba(124,58,237,0.2);border-radius:7px;color:#fff;padding:10px 13px;font-size:0.88rem;outline:none;transition:border-color 0.2s;font-family:'Montserrat',sans-serif;}
.admin-inp:focus,.admin-sel:focus,.admin-ta:focus{border-color:var(--admin-purple2);box-shadow:0 0 10px rgba(124,58,237,0.15);}
.admin-sel option{background:#120f28;}
.admin-ta{resize:vertical;min-height:80px;}
.admin-btn{background:linear-gradient(135deg,var(--admin-purple),var(--admin-purple2));border:none;color:#fff;padding:10px 22px;border-radius:7px;font-family:'Oswald',sans-serif;letter-spacing:3px;font-size:0.85rem;transition:var(--transition);cursor:pointer;}
.admin-btn:hover{transform:translateY(-1px);box-shadow:0 6px 20px rgba(124,58,237,0.35);}
.admin-btn-outline{background:transparent;border:1px solid rgba(124,58,237,0.4);color:var(--admin-purple2);padding:9px 20px;border-radius:7px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.82rem;transition:var(--transition);cursor:pointer;}
.admin-btn-outline:hover{background:rgba(124,58,237,0.1);}
.admin-btn-red{background:rgba(239,68,68,0.12);border:1px solid rgba(239,68,68,0.3);color:#ef4444;padding:9px 20px;border-radius:7px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.82rem;transition:var(--transition);cursor:pointer;}
.admin-btn-red:hover{background:rgba(239,68,68,0.25);}
.admin-btn-row{display:flex;gap:10px;flex-wrap:wrap;}
.admin-success{display:none;font-size:0.75rem;color:#86efac;margin-top:8px;}
.admin-success.show{display:block;}

/* Toggle Switch */
.admin-toggle-row{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid rgba(124,58,237,0.08);}
.admin-toggle-row:last-child{border-bottom:none;}
.admin-toggle-info{flex:1;}
.admin-toggle-name{font-size:0.85rem;color:#fff;font-weight:500;margin-bottom:2px;}
.admin-toggle-desc{font-size:0.68rem;color:rgba(139,92,246,0.6);}
.admin-switch{position:relative;width:46px;height:26px;flex-shrink:0;}
.admin-switch input{opacity:0;width:0;height:0;}
.admin-switch-slider{position:absolute;inset:0;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.12);border-radius:13px;cursor:pointer;transition:0.3s;}
.admin-switch-slider::before{content:'';position:absolute;width:18px;height:18px;left:3px;top:3px;border-radius:50%;background:#fff;transition:0.3s;}
.admin-switch input:checked+.admin-switch-slider{background:rgba(124,58,237,0.5);border-color:var(--admin-purple);}
.admin-switch input:checked+.admin-switch-slider::before{transform:translateX(20px);background:var(--admin-purple2);}

/* Color picker row */
.color-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px;}
.color-swatch{width:36px;height:36px;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:var(--transition);}
.color-swatch:hover,.color-swatch.active{border-color:#fff;transform:scale(1.1);}

/* Live broadcast studio */
.studio-portal{position:fixed;inset:0;background:#000;z-index:998;display:none;flex-direction:column;}
.studio-portal.open{display:flex;}

/* TikTok-style studio header */
.studio-header{background:rgba(0,0,0,0.9);border-bottom:1px solid rgba(255,255,255,0.08);padding:0 16px;display:flex;align-items:center;gap:12px;height:52px;flex-shrink:0;}
.studio-brand{font-family:'Oswald',sans-serif;font-size:0.9rem;letter-spacing:3px;color:#fff;flex:1;}
.studio-brand span{color:var(--sky);}
.studio-live-indicator{display:flex;align-items:center;gap:7px;background:rgba(220,38,38,0.9);padding:5px 12px;border-radius:5px;font-family:'Oswald',sans-serif;font-size:0.75rem;letter-spacing:2px;color:#fff;}
.studio-live-indicator i{font-size:0.55rem;animation:livedot 0.8s ease-in-out infinite;}
.studio-end-btn{background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.4);color:#ef4444;padding:7px 14px;border-radius:6px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.72rem;transition:var(--transition);}
.studio-end-btn:hover{background:rgba(239,68,68,0.3);}

/* Studio main */
.studio-main{flex:1;display:grid;grid-template-columns:1fr 280px;overflow:hidden;}
@media(max-width:768px){.studio-main{grid-template-columns:1fr;}}

/* Viewport */
.studio-viewport{position:relative;background:#000;overflow:hidden;}
.studio-canvas{position:absolute;inset:0;width:100%;height:100%;}
.studio-bg-canvas{position:absolute;inset:0;width:100%;height:100%;z-index:0;}
.studio-video-hidden{position:absolute;opacity:0;pointer-events:none;width:1px;height:1px;}

/* Studio overlays */
.studio-overlay-top{position:absolute;top:0;left:0;right:0;z-index:10;pointer-events:none;background:linear-gradient(rgba(0,0,0,0.7),transparent);padding:14px 16px 30px;}
.studio-overlay-toprow{display:flex;align-items:center;gap:10px;}
.studio-channel-badge{font-family:'Oswald',sans-serif;font-size:0.72rem;letter-spacing:3px;color:#fff;background:rgba(255,255,255,0.1);backdrop-filter:blur(6px);padding:4px 12px;border-radius:4px;border:1px solid rgba(255,255,255,0.15);}
.studio-viewers{display:flex;align-items:center;gap:5px;font-family:'Oswald',sans-serif;font-size:0.7rem;color:#fff;background:rgba(0,0,0,0.5);backdrop-filter:blur(6px);padding:4px 10px;border-radius:4px;}
.studio-viewers i{color:#ef4444;font-size:0.6rem;}
.studio-overlay-bottom{position:absolute;bottom:0;left:0;right:0;z-index:10;pointer-events:none;background:linear-gradient(transparent,rgba(0,0,0,0.85));padding:30px 16px 14px;}
.studio-city-lbl{font-family:'Oswald',sans-serif;font-size:0.62rem;letter-spacing:4px;color:var(--sky);margin-bottom:3px;}
.studio-temp-lbl{font-family:'Oswald',sans-serif;font-size:2rem;font-weight:700;color:#fff;line-height:1;}
.studio-cond-lbl{font-family:'Oswald',sans-serif;font-size:0.78rem;letter-spacing:2px;color:rgba(255,255,255,0.6);margin-top:4px;}

/* Studio actions (TikTok-style right rail on mobile, hidden on desktop sidebar) */
.studio-action-float{position:absolute;right:12px;bottom:80px;z-index:15;display:flex;flex-direction:column;gap:14px;pointer-events:auto;}
@media(min-width:769px){.studio-action-float{display:none;}}
.studio-action-btn{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem;border:none;cursor:pointer;transition:var(--transition);}
.studio-action-btn.flip{background:rgba(255,255,255,0.15);color:#fff;backdrop-filter:blur(6px);}
.studio-action-btn.chroma-toggle{background:rgba(0,255,80,0.2);color:#00ff50;border:1px solid rgba(0,255,80,0.4);}
.studio-action-btn.chroma-toggle.off{background:rgba(255,255,255,0.1);color:rgba(255,255,255,0.5);border:1px solid rgba(255,255,255,0.15);}

/* Studio sidebar */
.studio-sidebar{background:rgba(4,4,12,0.97);border-left:1px solid rgba(255,255,255,0.06);overflow-y:auto;display:flex;flex-direction:column;}
@media(max-width:768px){.studio-sidebar{display:none;}}
.studio-side-section{padding:16px;border-bottom:1px solid rgba(255,255,255,0.05);}
.studio-side-title{font-size:0.62rem;letter-spacing:3px;color:rgba(139,92,246,0.7);text-transform:uppercase;margin-bottom:12px;}
.studio-side-row{margin-bottom:12px;}
.studio-side-lbl{font-size:0.62rem;color:rgba(255,255,255,0.4);letter-spacing:1px;margin-bottom:5px;}
.studio-inp{width:100%;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);border-radius:6px;color:#fff;padding:8px 10px;font-size:0.82rem;outline:none;}
.studio-inp:focus{border-color:rgba(124,58,237,0.5);}
.studio-range{width:100%;accent-color:var(--admin-purple2);}
.studio-color-input{width:100%;height:36px;border:1px solid rgba(255,255,255,0.1);border-radius:6px;background:transparent;cursor:pointer;padding:2px;}
.studio-bg-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px;}
.studio-bg-btn{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.5);padding:8px 6px;border-radius:6px;font-size:0.68rem;letter-spacing:1px;font-family:'Oswald',sans-serif;transition:var(--transition);cursor:pointer;text-align:center;}
.studio-bg-btn:hover,.studio-bg-btn.on{background:rgba(124,58,237,0.15);border-color:rgba(124,58,237,0.4);color:var(--admin-purple2);}

/* Green screen status chip */
.chroma-status{display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:8px;font-size:0.72rem;font-weight:600;letter-spacing:1px;margin-bottom:10px;}
.chroma-status.on{background:rgba(0,220,80,0.12);border:1px solid rgba(0,220,80,0.3);color:#4ade80;}
.chroma-status.off{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.4);}
.chroma-dot{width:8px;height:8px;border-radius:50%;}
.chroma-status.on .chroma-dot{background:#4ade80;animation:livedot 1s infinite;}
.chroma-status.off .chroma-dot{background:rgba(255,255,255,0.3);}

/* Studio ticker */
.studio-ticker{height:30px;background:rgba(0,0,0,0.95);border-top:1px solid rgba(66,165,245,0.1);display:flex;align-items:center;overflow:hidden;flex-shrink:0;}
.studio-ticker-lbl{flex-shrink:0;background:var(--gold);color:#04090f;font-family:'Oswald',sans-serif;font-weight:700;font-size:0.65rem;letter-spacing:2px;height:100%;display:flex;align-items:center;padding:0 10px;}
.studio-ticker-wrap{overflow:hidden;flex:1;}
.studio-ticker-inner{white-space:nowrap;animation:tickscroll 40s linear infinite;font-size:0.7rem;color:#99bbcc;letter-spacing:0.5px;}

/* Change pw modal */
.change-pw-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.8);z-index:1100;align-items:center;justify-content:center;}
.change-pw-modal.open{display:flex;}
.change-pw-box{background:var(--admin-surface);border:1px solid var(--admin-border);border-radius:14px;padding:28px;max-width:360px;width:90%;}

/* Admin responsive */
@media(max-width:900px){
  .dashboard{grid-template-columns:1fr;padding:14px 16px;}
  .dash-sidebar{flex-direction:row;flex-wrap:wrap;}
  .dash-sidebar>*{flex:1;min-width:200px;}
  .section-wrap{padding:0 16px 16px;}
  .radar-page,.hurricane-page,.alerts-page,.aq-page,.video-page,.news-page{padding:14px 16px;}
  .header-top{padding:10px 16px;}
  .search-strip{padding:10px 16px;}
  .main-nav{padding:0 16px;}
}
</style>
</head>
<body>

<!-- BG -->
<div class="bg-scene">
  <div class="bg-grad"></div>
  <div class="bg-cloud" style="width:130%;height:160px;top:2%;animation-duration:80s;left:-15%;"></div>
  <div class="bg-cloud" style="width:120%;height:110px;top:30%;animation-duration:100s;animation-delay:-40s;opacity:0.6;left:-10%;"></div>
  <div class="bg-cloud" style="width:140%;height:190px;top:60%;animation-duration:90s;animation-delay:-20s;opacity:0.35;left:-20%;"></div>
  <div class="starfield" id="starfield"></div>
  <div class="rain-wrap" id="rainWrap"></div>
  <div class="snow-wrap" id="snowWrap"></div>
  <div class="lightning-flash" id="lflash"></div>
</div>

<!-- LOADER -->
<div class="site-loader" id="siteLoader">
  <div class="loader-logo">Smokey's <span>Weather Network</span></div>
  <div class="loader-ring"></div>
  <div class="loader-text">Loading Weather Data‚Ä¶</div>
</div>

<!-- TAP INDICATOR (shows progress dots when tapping logo) -->
<div class="tap-indicator" id="tapIndicator">
  <div class="tap-dot" id="td0"></div>
  <div class="tap-dot" id="td1"></div>
  <div class="tap-dot" id="td2"></div>
  <div class="tap-dot" id="td3"></div>
  <div class="tap-dot" id="td4"></div>
  <div class="tap-dot" id="td5"></div>
  <div class="tap-dot" id="td6"></div>
  <div class="tap-dot" id="td7"></div>
  <div class="tap-dot" id="td8"></div>
  <div class="tap-dot" id="td9"></div>
</div>

<!-- ADMIN PIN OVERLAY -->
<div class="admin-pin-overlay" id="adminPinOverlay">
  <div class="admin-pin-box">
    <div class="admin-pin-glow"></div>
    <div class="admin-pin-icon">üîê</div>
    <div class="admin-pin-title">ADMIN ACCESS</div>
    <div class="admin-pin-sub">SMOKEY'S WEATHER NETWORK</div>
    <div class="pin-display" id="pinDisplay">
      <!-- 12 dots for 12-digit code -->
      <div class="pin-dot" id="pd0"></div><div class="pin-dot" id="pd1"></div>
      <div class="pin-dot" id="pd2"></div><div class="pin-dot" id="pd3"></div>
      <div class="pin-dot" id="pd4"></div><div class="pin-dot" id="pd5"></div>
      <div class="pin-dot" id="pd6"></div><div class="pin-dot" id="pd7"></div>
      <div class="pin-dot" id="pd8"></div><div class="pin-dot" id="pd9"></div>
      <div class="pin-dot" id="pd10"></div><div class="pin-dot" id="pd11"></div>
    </div>
    <div class="pin-err-msg" id="pinErrMsg"></div>
    <div class="pin-lockout-msg" id="pinLockoutMsg">‚õî Too many attempts. Wait <span id="lockoutTimer">30</span>s</div>
    <div class="pin-numpad">
      <button class="pin-key" onclick="pinPress('1')">1</button>
      <button class="pin-key" onclick="pinPress('2')">2</button>
      <button class="pin-key" onclick="pinPress('3')">3</button>
      <button class="pin-key" onclick="pinPress('4')">4</button>
      <button class="pin-key" onclick="pinPress('5')">5</button>
      <button class="pin-key" onclick="pinPress('6')">6</button>
      <button class="pin-key" onclick="pinPress('7')">7</button>
      <button class="pin-key" onclick="pinPress('8')">8</button>
      <button class="pin-key" onclick="pinPress('9')">9</button>
      <button class="pin-key zero" onclick="pinPress('0')">0</button>
      <button class="pin-key del" onclick="pinBackspace()">‚å´</button>
    </div>
    <button class="pin-cancel" onclick="closeAdminPin()">CANCEL</button>
  </div>
</div>

<!-- ADMIN PORTAL -->
<div class="admin-portal" id="adminPortal">
  <div class="admin-header">
    <div class="admin-logo">
      <div class="admin-logo-badge">üõ°Ô∏è</div>
      Smokey's <span>Admin</span>
    </div>
    <div class="admin-tabs">
      <button class="admin-tab active" onclick="switchAdminTab('dashboard',this)"><i class="fas fa-gauge"></i>Dashboard</button>
      <button class="admin-tab" onclick="switchAdminTab('site',this)"><i class="fas fa-paint-brush"></i>Site Editor</button>
      <button class="admin-tab" onclick="switchAdminTab('videos',this)"><i class="fas fa-film"></i>Videos</button>
      <button class="admin-tab" onclick="switchAdminTab('alerts',this)"><i class="fas fa-triangle-exclamation"></i>Alerts</button>
      <button class="admin-tab" onclick="switchAdminTab('news',this)"><i class="fas fa-newspaper"></i>News</button>
      <button class="admin-tab" onclick="switchAdminTab('broadcast',this)"><i class="fas fa-tower-broadcast"></i>Live Studio</button>
      <button class="admin-tab" onclick="switchAdminTab('security',this)"><i class="fas fa-shield"></i>Security</button>
    </div>
    <button class="admin-close-btn" onclick="closeAdminPortal()"><i class="fas fa-xmark"></i> EXIT</button>
  </div>
  <div class="admin-body">
    <!-- Sidebar -->
    <div class="admin-sidebar">
      <div class="admin-nav-section">Overview</div>
      <div class="admin-nav-item active" onclick="switchAdminTab('dashboard',null,this)"><i class="fas fa-gauge"></i>Dashboard</div>
      <div class="admin-nav-section">Content</div>
      <div class="admin-nav-item" onclick="switchAdminTab('site',null,this)"><i class="fas fa-paint-brush"></i>Site Editor</div>
      <div class="admin-nav-item" onclick="switchAdminTab('videos',null,this)"><i class="fas fa-film"></i>Video Manager</div>
      <div class="admin-nav-item" onclick="switchAdminTab('alerts',null,this)"><i class="fas fa-triangle-exclamation"></i>Alert Manager</div>
      <div class="admin-nav-item" onclick="switchAdminTab('news',null,this)"><i class="fas fa-newspaper"></i>News Editor</div>
      <div class="admin-nav-section">Broadcast</div>
      <div class="admin-nav-item" onclick="switchAdminTab('broadcast',null,this)"><i class="fas fa-tower-broadcast"></i>Live Studio</div>
      <div class="admin-nav-section">System</div>
      <div class="admin-nav-item" onclick="switchAdminTab('security',null,this)"><i class="fas fa-shield"></i>Security</div>
    </div>

    <!-- Content Area -->
    <div class="admin-content">

      <!-- DASHBOARD PANEL -->
      <div class="admin-panel active" id="apanel-dashboard">
        <div class="admin-section-title"><i class="fas fa-gauge"></i>Admin Overview</div>
        <div class="admin-stats-row">
          <div class="admin-stat"><div class="admin-stat-icon">üìπ</div><div class="admin-stat-val" id="aStatVideos">0</div><div class="admin-stat-lbl">Videos</div></div>
          <div class="admin-stat"><div class="admin-stat-icon">‚ö†Ô∏è</div><div class="admin-stat-val" id="aStatAlerts">0</div><div class="admin-stat-lbl">Active Alerts</div></div>
          <div class="admin-stat"><div class="admin-stat-icon">üìç</div><div class="admin-stat-val" id="aStatCity">‚Äî</div><div class="admin-stat-lbl">Current Location</div></div>
          <div class="admin-stat"><div class="admin-stat-icon">üå°Ô∏è</div><div class="admin-stat-val" id="aStatTemp">‚Äî</div><div class="admin-stat-lbl">Live Temp</div></div>
        </div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-bolt"></i> Quick Actions</div>
          <div class="admin-btn-row">
            <button class="admin-btn" onclick="switchAdminTab('broadcast')"><i class="fas fa-tower-broadcast"></i> Open Live Studio</button>
            <button class="admin-btn-outline" onclick="switchAdminTab('videos')">Manage Videos</button>
            <button class="admin-btn-outline" onclick="switchAdminTab('site')">Edit Site</button>
          </div>
        </div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-info-circle"></i>System Status</div>
          <div style="display:flex;flex-direction:column;gap:10px;">
            <div style="display:flex;justify-content:space-between;font-size:0.82rem;"><span style="color:rgba(255,255,255,0.5);">Weather API</span><span style="color:#4ade80;">‚óè Online</span></div>
            <div style="display:flex;justify-content:space-between;font-size:0.82rem;"><span style="color:rgba(255,255,255,0.5);">Radar Feed</span><span style="color:#4ade80;">‚óè Online</span></div>
            <div style="display:flex;justify-content:space-between;font-size:0.82rem;"><span style="color:rgba(255,255,255,0.5);">AQI Service</span><span style="color:#4ade80;">‚óè Online</span></div>
            <div style="display:flex;justify-content:space-between;font-size:0.82rem;"><span style="color:rgba(255,255,255,0.5);">Live Broadcast</span><span style="color:rgba(255,255,255,0.3);">‚óè Standby</span></div>
          </div>
        </div>
      </div>

      <!-- SITE EDITOR PANEL -->
      <div class="admin-panel" id="apanel-site">
        <div class="admin-section-title"><i class="fas fa-paint-brush"></i>Site Editor</div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-signature"></i>Station Branding</div>
          <div class="admin-form-row">
            <label class="admin-lbl">Station Name</label>
            <input class="admin-inp" id="edit-station-name" value="Smokey's Weather Network"/>
          </div>
          <div class="admin-form-row">
            <label class="admin-lbl">Tagline</label>
            <input class="admin-inp" id="edit-tagline" value="Professional Forecast ¬∑ Live & Accurate"/>
          </div>
          <div class="admin-form-row">
            <label class="admin-lbl">Station Logo Emoji</label>
            <input class="admin-inp" id="edit-logo-emoji" value="üå©Ô∏è" style="font-size:1.4rem;width:80px;"/>
          </div>
          <div class="admin-btn-row">
            <button class="admin-btn" onclick="applySiteEdits()">Apply Changes</button>
            <div class="admin-success" id="site-edit-success">‚úì Changes applied!</div>
          </div>
        </div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-palette"></i>Ticker Message</div>
          <div class="admin-form-row">
            <label class="admin-lbl">Custom Ticker Override (leave blank for auto)</label>
            <textarea class="admin-ta" id="edit-ticker" placeholder="e.g. üö® SPECIAL BULLETIN: Major storm system approaching..."></textarea>
          </div>
          <button class="admin-btn" onclick="applyTickerEdit()">Update Ticker</button>
        </div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-sliders"></i>Display Settings</div>
          <div class="admin-toggle-row">
            <div class="admin-toggle-info"><div class="admin-toggle-name">Show Alert Badge</div><div class="admin-toggle-desc">Display alert warning in header</div></div>
            <label class="admin-switch"><input type="checkbox" id="tog-alert-badge" checked onchange="toggleAdminSetting('alertBadgeEnabled',this.checked)"/><span class="admin-switch-slider"></span></label>
          </div>
          <div class="admin-toggle-row">
            <div class="admin-toggle-info"><div class="admin-toggle-name">Weather Particles</div><div class="admin-toggle-desc">Rain/snow/lightning effects</div></div>
            <label class="admin-switch"><input type="checkbox" id="tog-particles" checked onchange="toggleAdminSetting('particlesEnabled',this.checked)"/><span class="admin-switch-slider"></span></label>
          </div>
          <div class="admin-toggle-row">
            <div class="admin-toggle-info"><div class="admin-toggle-name">Star Field</div><div class="admin-toggle-desc">Animated background stars</div></div>
            <label class="admin-switch"><input type="checkbox" id="tog-stars" checked onchange="toggleAdminSetting('starsEnabled',this.checked)"/><span class="admin-switch-slider"></span></label>
          </div>
        </div>
      </div>

      <!-- VIDEO MANAGER PANEL -->
      <div class="admin-panel" id="apanel-videos">
        <div class="admin-section-title"><i class="fas fa-film"></i>Video Manager</div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-plus"></i>Add New Video</div>
          <div class="form-grid-2">
            <div><label class="admin-lbl">Title *</label><input class="admin-inp" id="av-title" placeholder="Segment title‚Ä¶"/></div>
            <div><label class="admin-lbl">Category</label>
              <select class="admin-sel" id="av-cat">
                <option value="report">Weather Report</option>
                <option value="live">Live Broadcast</option>
                <option value="clip">Field Clip</option>
                <option value="upload">Uploaded</option>
              </select>
            </div>
            <div class="fg-full"><label class="admin-lbl">YouTube / Video URL</label><input class="admin-inp" id="av-url" placeholder="https://youtube.com/watch?v=‚Ä¶"/></div>
            <div class="fg-full"><label class="admin-lbl">Upload Video File</label><input type="file" class="admin-inp" id="av-file" accept="video/*" style="padding:8px;"/></div>
            <div class="fg-full"><label class="admin-lbl">Description</label><textarea class="admin-ta" id="av-desc" placeholder="Brief description‚Ä¶"></textarea></div>
          </div>
          <div class="admin-btn-row" style="margin-top:12px;">
            <button class="admin-btn" onclick="adminSaveVideo()">Save Video</button>
          </div>
        </div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-list"></i>Video Library (<span id="aVideoCount">0</span>)</div>
          <div id="aVideoList"></div>
        </div>
      </div>

      <!-- ALERT MANAGER PANEL -->
      <div class="admin-panel" id="apanel-alerts">
        <div class="admin-section-title"><i class="fas fa-triangle-exclamation"></i>Alert Manager</div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-plus-circle"></i>Publish Custom Alert</div>
          <div class="admin-form-row">
            <label class="admin-lbl">Alert Title *</label>
            <input class="admin-inp" id="ca-title" placeholder="e.g. Tornado Warning"/>
          </div>
          <div class="form-grid-2" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
            <div>
              <label class="admin-lbl">Severity</label>
              <select class="admin-sel" id="ca-sev">
                <option value="minor">Minor</option>
                <option value="moderate">Moderate</option>
                <option value="severe" selected>Severe</option>
                <option value="extreme">Extreme</option>
              </select>
            </div>
            <div>
              <label class="admin-lbl">Affected Area</label>
              <input class="admin-inp" id="ca-area" placeholder="e.g. Metro Area"/>
            </div>
          </div>
          <div class="admin-form-row" style="margin-top:12px;">
            <label class="admin-lbl">Alert Body</label>
            <textarea class="admin-ta" id="ca-body" placeholder="Describe the weather event in detail‚Ä¶"></textarea>
          </div>
          <div class="form-grid-2" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:0;">
            <div><label class="admin-lbl">Effective</label><input class="admin-inp" id="ca-eff" value="Immediately"/></div>
            <div><label class="admin-lbl">Expires</label><input class="admin-inp" id="ca-exp" value="Until further notice"/></div>
          </div>
          <div class="admin-btn-row" style="margin-top:12px;">
            <button class="admin-btn" onclick="publishCustomAlert()">Publish Alert</button>
            <button class="admin-btn-red" onclick="clearAllAlerts()">Clear All Alerts</button>
          </div>
          <div class="admin-success" id="alert-success">‚úì Alert published!</div>
        </div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-list"></i>Active Alerts</div>
          <div id="aAlertList"><div style="color:rgba(255,255,255,0.3);font-size:0.82rem;">No active alerts.</div></div>
        </div>
      </div>

      <!-- NEWS EDITOR PANEL -->
      <div class="admin-panel" id="apanel-news">
        <div class="admin-section-title"><i class="fas fa-newspaper"></i>News Editor</div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-pen"></i>Publish Story</div>
          <div class="admin-form-row">
            <label class="admin-lbl">Headline *</label>
            <input class="admin-inp" id="ns-headline" placeholder="Breaking news headline‚Ä¶"/>
          </div>
          <div class="form-grid-2" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
            <div><label class="admin-lbl">Category</label>
              <select class="admin-sel" id="ns-cat">
                <option>Severe Weather</option><option>Climate</option><option>Winter Weather</option>
                <option>Tropical</option><option>Forecast</option><option>Local</option><option>Breaking</option>
              </select>
            </div>
            <div><label class="admin-lbl">Icon Emoji</label><input class="admin-inp" id="ns-icon" value="‚õàÔ∏è" style="font-size:1.2rem;width:80px;"/></div>
          </div>
          <div class="admin-form-row" style="margin-top:12px;">
            <label class="admin-lbl">Story Body</label>
            <textarea class="admin-ta" id="ns-body" rows="4" placeholder="Story content‚Ä¶"></textarea>
          </div>
          <div class="admin-btn-row" style="margin-top:12px;">
            <button class="admin-btn" onclick="publishNewsStory()">Publish Story</button>
          </div>
          <div class="admin-success" id="news-success">‚úì Story published!</div>
        </div>
      </div>

      <!-- BROADCAST / LIVE STUDIO PANEL -->
      <div class="admin-panel" id="apanel-broadcast">
        <div class="admin-section-title"><i class="fas fa-tower-broadcast"></i>Live Studio</div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-video"></i>Launch Live Broadcast</div>
          <div style="font-size:0.82rem;color:rgba(255,255,255,0.5);line-height:1.7;margin-bottom:16px;">Open the full-screen TikTok-style broadcast studio with green screen removal, real-time weather overlays, and animated weather backgrounds. Requires camera access.</div>
          <div class="admin-btn-row">
            <button class="admin-btn" style="background:linear-gradient(135deg,#dc2626,#b91c1c);" onclick="openStudio()"><i class="fas fa-circle" style="color:#fff;font-size:0.6rem;"></i> &nbsp;GO LIVE NOW</button>
          </div>
        </div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-sliders"></i>Default Studio Settings</div>
          <div class="admin-form-row">
            <label class="admin-lbl">Default Green Screen Color</label>
            <input type="color" id="def-chroma-color" value="#00ff00" style="height:40px;width:100%;border:1px solid rgba(124,58,237,0.3);border-radius:7px;background:transparent;cursor:pointer;"/>
          </div>
          <div class="admin-form-row">
            <label class="admin-lbl">Default Background</label>
            <select class="admin-sel" id="def-bg">
              <option value="radar">üì° Radar</option>
              <option value="storm">‚õàÔ∏è Storm</option>
              <option value="map">üó∫Ô∏è Map</option>
              <option value="clear">‚òÄÔ∏è Clear Sky</option>
            </select>
          </div>
          <div class="admin-form-row">
            <label class="admin-lbl">Sensitivity (lower = tighter chroma key)</label>
            <input type="range" id="def-thresh" min="20" max="120" value="60" style="width:100%;accent-color:#8b5cf6;"/>
          </div>
          <button class="admin-btn" onclick="saveStudioDefaults()">Save Defaults</button>
          <div class="admin-success" id="studio-save-success">‚úì Saved!</div>
        </div>
      </div>

      <!-- SECURITY PANEL -->
      <div class="admin-panel" id="apanel-security">
        <div class="admin-section-title"><i class="fas fa-shield"></i>Security</div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-key"></i>Change Admin PIN</div>
          <div style="font-size:0.78rem;color:rgba(139,92,246,0.6);margin-bottom:14px;line-height:1.6;">Your admin PIN must be numeric. Minimum 6 digits. Current PIN is hidden for security.</div>
          <div class="admin-form-row">
            <label class="admin-lbl">New PIN</label>
            <input class="admin-inp" type="password" id="new-pin-inp" placeholder="Enter new numeric PIN‚Ä¶" inputmode="numeric" pattern="[0-9]*"/>
          </div>
          <div class="admin-form-row">
            <label class="admin-lbl">Confirm New PIN</label>
            <input class="admin-inp" type="password" id="confirm-pin-inp" placeholder="Confirm new PIN‚Ä¶" inputmode="numeric" pattern="[0-9]*"/>
          </div>
          <div class="admin-btn-row">
            <button class="admin-btn" onclick="changeAdminPIN()">Update PIN</button>
          </div>
          <div class="admin-success" id="pin-change-success">‚úì PIN updated successfully!</div>
          <div style="display:none;font-size:0.75rem;color:#fca5a5;margin-top:8px;" id="pin-change-err"></div>
        </div>
        <div class="admin-card">
          <div class="admin-card-title"><i class="fas fa-lock"></i>Security Info</div>
          <div style="display:flex;flex-direction:column;gap:10px;">
            <div style="display:flex;justify-content:space-between;font-size:0.82rem;"><span style="color:rgba(255,255,255,0.5);">Failed Attempts</span><span id="sec-fail-count" style="color:#facc15;">0</span></div>
            <div style="display:flex;justify-content:space-between;font-size:0.82rem;"><span style="color:rgba(255,255,255,0.5);">Lockout After</span><span style="color:rgba(255,255,255,0.7);">3 failed attempts</span></div>
            <div style="display:flex;justify-content:space-between;font-size:0.82rem;"><span style="color:rgba(255,255,255,0.5);">Lockout Duration</span><span style="color:rgba(255,255,255,0.7);">30 seconds</span></div>
            <div style="display:flex;justify-content:space-between;font-size:0.82rem;"><span style="color:rgba(255,255,255,0.5);">Entry Method</span><span style="color:rgba(255,255,255,0.7);">10√ó logo tap + PIN</span></div>
            <div style="display:flex;justify-content:space-between;font-size:0.82rem;"><span style="color:rgba(255,255,255,0.5);">PIN stored</span><span style="color:rgba(255,255,255,0.7);">Locally (hashed)</span></div>
          </div>
          <div style="margin-top:14px;">
            <button class="admin-btn-red" onclick="resetFailCount()">Reset Fail Counter</button>
          </div>
        </div>
      </div>

    </div><!-- end admin-content -->
  </div><!-- end admin-body -->
</div><!-- end admin-portal -->

<!-- LIVE STUDIO MODAL (TikTok-style fullscreen) -->
<div class="studio-portal" id="studioPortal">
  <div class="studio-header">
    <div class="studio-brand">Smokey's <span>Weather Network</span></div>
    <div class="studio-live-indicator"><i class="fas fa-circle"></i> LIVE</div>
    <button class="studio-end-btn" onclick="endStudio()"><i class="fas fa-stop"></i> END LIVE</button>
  </div>
  <div class="studio-main">
    <!-- Viewport -->
    <div class="studio-viewport" id="studioViewport">
      <video id="studioVideo" class="studio-video-hidden" autoplay playsinline muted></video>
      <canvas id="studioBgCanvas" class="studio-bg-canvas"></canvas>
      <canvas id="studioCanvas" class="studio-canvas"></canvas>

      <!-- Top overlay -->
      <div class="studio-overlay-top">
        <div class="studio-overlay-toprow">
          <div class="studio-channel-badge">SMOKEY'S WEATHER NETWORK</div>
          <div class="studio-viewers"><i class="fas fa-circle"></i><span id="studioViewers">0</span> watching</div>
        </div>
      </div>

      <!-- Bottom overlay -->
      <div class="studio-overlay-bottom">
        <div class="studio-city-lbl" id="studioCity">üìç ---</div>
        <div class="studio-temp-lbl" id="studioTemp">--¬∞</div>
        <div class="studio-cond-lbl" id="studioCond">Loading‚Ä¶</div>
      </div>

      <!-- Floating action buttons (mobile) -->
      <div class="studio-action-float">
        <button class="studio-action-btn flip" onclick="flipCamera()" title="Flip Camera"><i class="fas fa-rotate"></i></button>
        <button class="studio-action-btn chroma-toggle on" id="chromaToggleBtn" onclick="toggleChroma()"><i class="fas fa-wand-magic-sparkles"></i></button>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="studio-sidebar">
      <div class="studio-side-section">
        <div class="studio-side-title">Green Screen</div>
        <div class="chroma-status on" id="chromaStatus"><div class="chroma-dot"></div>CHROMA KEY ON</div>
        <div class="studio-side-row">
          <div class="studio-side-lbl">Screen Color</div>
          <input type="color" class="studio-color-input" id="studioChromaColor" value="#00ff00" oninput="updateStudioChroma()"/>
        </div>
        <div class="studio-side-row">
          <div class="studio-side-lbl">Sensitivity</div>
          <input type="range" class="studio-range" id="studioChromaThresh" min="20" max="130" value="60" oninput="updateStudioChroma()"/>
        </div>
        <div class="studio-side-row">
          <div class="studio-side-lbl">Edge Smoothing</div>
          <input type="range" class="studio-range" id="studioChromaSmooth" min="0" max="35" value="12" oninput="updateStudioChroma()"/>
        </div>
        <button style="width:100%;background:rgba(0,220,80,0.1);border:1px solid rgba(0,220,80,0.3);color:#4ade80;padding:8px;border-radius:6px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.72rem;cursor:pointer;" onclick="toggleChroma()">TOGGLE CHROMA</button>
      </div>
      <div class="studio-side-section">
        <div class="studio-side-title">Virtual Background</div>
        <div class="studio-bg-grid">
          <button class="studio-bg-btn on" onclick="setStudioBg('radar',this)">üì° Radar</button>
          <button class="studio-bg-btn" onclick="setStudioBg('storm',this)">‚õàÔ∏è Storm</button>
          <button class="studio-bg-btn" onclick="setStudioBg('map',this)">üó∫Ô∏è Map</button>
          <button class="studio-bg-btn" onclick="setStudioBg('clear',this)">‚òÄÔ∏è Clear</button>
        </div>
      </div>
      <div class="studio-side-section">
        <div class="studio-side-title">Camera</div>
        <button style="width:100%;background:rgba(124,58,237,0.1);border:1px solid rgba(124,58,237,0.25);color:var(--admin-purple2);padding:8px;border-radius:6px;font-family:'Oswald',sans-serif;letter-spacing:2px;font-size:0.72rem;cursor:pointer;margin-bottom:8px;" onclick="flipCamera()"><i class="fas fa-rotate"></i> FLIP CAMERA</button>
        <div id="camFacingLabel" style="font-size:0.65rem;color:rgba(255,255,255,0.3);text-align:center;letter-spacing:1px;">REAR CAMERA</div>
      </div>
    </div>
  </div>
  <div class="studio-ticker">
    <div class="studio-ticker-lbl">‚ö° SWN</div>
    <div class="studio-ticker-wrap">
      <div class="studio-ticker-inner" id="studioTickerInner">Smokey's Weather Network ‚Äî LIVE Broadcast</div>
    </div>
  </div>
</div>

<!-- VIDEO MODAL -->
<div class="video-modal" id="videoModal">
  <div class="video-modal-inner">
    <button class="video-modal-close" onclick="closeVideoModal()">‚úï</button>
    <div class="video-modal-frame" id="videoModalFrame"></div>
  </div>
</div>

<!-- MAIN SITE -->
<div style="display:flex;flex-direction:column;min-height:100vh;position:relative;z-index:1;">

<!-- HEADER -->
<header class="site-header">
  <div class="header-top">
    <div class="logo" id="logoWrap">
      <div class="logo-mark" id="logoMark" onclick="handleLogoTap()">üå©Ô∏è</div>
      <div class="logo-text-wrap">
        <div class="logo-name" id="logoName">Smokey's <span>Weather</span> Network</div>
        <div class="logo-tagline" id="logoTagline">Professional Forecast ¬∑ Live & Accurate</div>
      </div>
    </div>
    <div class="header-center">
      <div class="live-badge"><div class="live-dot"></div>LIVE DATA</div>
      <div class="alert-badge" id="alertBadge"><i class="fas fa-triangle-exclamation"></i><span id="alertBadgeText">ALERTS ACTIVE</span></div>
    </div>
    <div class="header-clock">
      <div class="clock-time" id="clockTime">--:--:--</div>
      <div class="clock-date" id="clockDate">---</div>
    </div>
  </div>
  <nav class="main-nav">
    <button class="nav-btn active" onclick="showPage('dashboard',this)"><i class="fas fa-house"></i>Dashboard</button>
    <button class="nav-btn" onclick="showPage('radar',this)"><i class="fas fa-satellite-dish"></i>Radar</button>
    <button class="nav-btn" onclick="showPage('forecast',this)"><i class="fas fa-calendar-days"></i>Forecast</button>
    <button class="nav-btn" onclick="showPage('alerts',this)"><i class="fas fa-triangle-exclamation"></i>Alerts</button>
    <button class="nav-btn" onclick="showPage('hurricane',this)"><i class="fas fa-hurricane"></i>Hurricane</button>
    <button class="nav-btn" onclick="showPage('airquality',this)"><i class="fas fa-wind"></i>Air Quality</button>
    <button class="nav-btn" onclick="showPage('videos',this)"><i class="fas fa-video"></i>Videos</button>
    <button class="nav-btn" onclick="showPage('news',this)"><i class="fas fa-newspaper"></i>News</button>
  </nav>
</header>

<!-- SEARCH -->
<div class="search-strip">
  <div class="search-box">
    <input type="text" id="citySearch" placeholder="Search city, state or country‚Ä¶"/>
    <button onclick="doSearch()">SEARCH</button>
  </div>
  <button class="locate-btn" onclick="doLocate()" title="Use my location"><i class="fas fa-location-dot"></i></button>
  <div class="unit-toggle">
    <button class="unit-btn on" id="btnF" onclick="setUnit('F')">¬∞F</button>
    <button class="unit-btn" id="btnC" onclick="setUnit('C')">¬∞C</button>
  </div>
  <div class="err-msg" id="errMsg">Location not found. Please try another search.</div>
</div>

<!-- DASHBOARD -->
<div class="page active" id="page-dashboard">
  <div class="dashboard">
    <div class="conditions-hero">
      <div class="city-row">
        <span class="city-pin"><i class="fas fa-location-dot"></i></span>
        <span class="city-name" id="heroCity">---</span>
        <span class="city-region" id="heroRegion"></span>
      </div>
      <div class="data-attr" id="heroAttr">Connecting to Smokey's Weather Network data stream‚Ä¶</div>
      <div class="main-temp-row">
        <div class="wx-icon" id="heroIcon">üå°Ô∏è</div>
        <div class="temp-big" id="heroTemp">--</div>
        <div class="temp-unit-lbl" id="heroUnit">¬∞F</div>
      </div>
      <div class="condition-lbl" id="heroCond">Loading‚Ä¶</div>
      <div class="stats-grid">
        <div class="stat-card"><div class="stat-lbl">Humidity</div><div class="stat-val"><span class="stat-icon"><i class="fas fa-droplet"></i></span><span id="sHumidity">--%</span></div></div>
        <div class="stat-card"><div class="stat-lbl">Wind</div><div class="stat-val"><span class="stat-icon"><i class="fas fa-wind"></i></span><span id="sWind">--</span></div></div>
        <div class="stat-card"><div class="stat-lbl">Visibility</div><div class="stat-val"><span class="stat-icon"><i class="fas fa-eye"></i></span><span id="sVis">--</span></div></div>
        <div class="stat-card"><div class="stat-lbl">Pressure</div><div class="stat-val"><span class="stat-icon"><i class="fas fa-gauge"></i></span><span id="sPressure">--</span></div></div>
        <div class="stat-card"><div class="stat-lbl">Dew Point</div><div class="stat-val" id="sDew">--</div></div>
        <div class="stat-card"><div class="stat-lbl">Cloud Cover</div><div class="stat-val" id="sCloud">--</div></div>
        <div class="stat-card"><div class="stat-lbl">UV Index</div><div class="stat-val" id="sUV">--</div></div>
        <div class="stat-card"><div class="stat-lbl">Precip</div><div class="stat-val" id="sPrecip">--</div></div>
      </div>
    </div>
    <div class="dash-sidebar">
      <div class="widget">
        <div class="widget-title"><i class="fas fa-thermometer-half"></i> Feels Like</div>
        <div class="feels-num" id="wFeels">--¬∞</div>
        <div class="feels-desc" id="wFeelsDesc">---</div>
        <div class="prog"><div class="prog-fill prog-blue" id="wFeelsBar" style="width:50%;"></div></div>
      </div>
      <div class="widget">
        <div class="widget-title"><i class="fas fa-sun"></i> Sun Schedule</div>
        <div class="sun-arc">
          <svg viewBox="0 0 200 60" xmlns="http://www.w3.org/2000/svg">
            <defs><linearGradient id="sunarcgrad" x1="0" y1="0" x2="1" y2="0"><stop offset="0%" stop-color="#f59e0b" stop-opacity="0.4"/><stop offset="50%" stop-color="#fde047" stop-opacity="0.8"/><stop offset="100%" stop-color="#f97316" stop-opacity="0.4"/></linearGradient></defs>
            <path d="M 10 55 Q 100 5 190 55" fill="none" stroke="url(#sunarcgrad)" stroke-width="1.5" stroke-dasharray="4 4" opacity="0.6"/>
            <circle id="sunDot" cx="100" cy="26" r="7" fill="#fde047" opacity="0.9"><animate attributeName="opacity" values="0.9;0.5;0.9" dur="2s" repeatCount="indefinite"/></circle>
            <circle id="sunGlow" cx="100" cy="26" r="13" fill="#fde047" opacity="0.1"/>
          </svg>
        </div>
        <div class="sun-times">
          <div class="sun-item"><div class="sun-icon">üåÖ</div><div class="sun-time-val" id="sunRise">--:--</div><div class="sun-time-lbl">RISE</div></div>
          <div class="sun-item"><div class="sun-icon">üåá</div><div class="sun-time-val" id="sunSet">--:--</div><div class="sun-time-lbl">SET</div></div>
        </div>
      </div>
      <div class="widget">
        <div class="widget-title"><i class="fas fa-wind"></i> Wind</div>
        <div class="feels-num" id="wWindBig">--</div>
        <div class="feels-desc" id="wWindDir">Direction: ---</div>
        <div class="feels-desc" id="wWindGust" style="color:#93c5fd;margin-top:4px;">Gusts: --</div>
        <div class="prog" style="margin-top:10px;"><div class="prog-fill prog-teal" id="wWindBar" style="width:15%;"></div></div>
      </div>
      <div class="widget" style="background:rgba(10,30,15,0.6);border-color:rgba(22,163,74,0.2);">
        <div class="widget-title" style="color:var(--dim);"><i class="fas fa-leaf"></i> Air Quality</div>
        <div class="aqi-num" id="wAQI" style="color:#4ade80;">--</div>
        <div class="aqi-label aqi-good" id="wAQILabel">Loading‚Ä¶</div>
        <div class="prog" style="margin-top:12px;"><div class="prog-fill" id="wAQIBar" style="width:20%;background:linear-gradient(90deg,#16a34a,#4ade80);"></div></div>
      </div>
      <div class="widget alert-widget" id="alertWidget">
        <div class="widget-title"><i class="fas fa-triangle-exclamation" style="color:#ef4444;"></i> Weather Alerts</div>
        <div class="alert-count" id="alertCount">0</div>
        <div class="alert-list" id="alertList"></div>
      </div>
    </div>
  </div>
  <div class="section-wrap">
    <div class="section-head"><i class="fas fa-clock"></i> Hourly Forecast</div>
    <div class="hourly-scroll" id="hourlyScroll"></div>
  </div>
  <div class="section-wrap">
    <div class="section-head"><i class="fas fa-calendar-week"></i> 7-Day Forecast</div>
    <div class="forecast7" id="forecast7"></div>
  </div>
</div>

<!-- RADAR PAGE -->
<div class="page" id="page-radar">
  <div class="radar-page">
    <div class="section-head"><i class="fas fa-satellite-dish"></i> Live Radar</div>
    <div class="radar-container">
      <div class="radar-toolbar">
        <span class="radar-title">RADAR TYPE:</span>
        <button class="radar-type-btn on" onclick="switchRadar('rain',this)">üåßÔ∏è Precipitation</button>
        <button class="radar-type-btn" onclick="switchRadar('wind',this)">üí® Wind</button>
        <button class="radar-type-btn" onclick="switchRadar('temp',this)">üå°Ô∏è Temperature</button>
        <button class="radar-type-btn" onclick="switchRadar('cloud',this)">‚òÅÔ∏è Clouds</button>
      </div>
      <iframe class="radar-frame" id="radarFrame" src="https://embed.windy.com/embed2.html?lat=39&lon=-98&detailLat=39&detailLon=-98&width=100%&height=520&zoom=4&level=surface&overlay=rain&product=ecmwf&menu=&message=&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=mph&metricTemp=%C2%B0F&radarRange=-1" frameborder="0" allow="geolocation"></iframe>
    </div>
  </div>
</div>

<!-- FORECAST PAGE -->
<div class="page" id="page-forecast">
  <div style="padding:20px 24px;max-width:1400px;margin:0 auto;">
    <div class="section-head"><i class="fas fa-clock"></i> 48-Hour Hourly Forecast</div>
    <div class="hourly-scroll" id="hourlyScroll2" style="margin-bottom:24px;"></div>
    <div class="section-head"><i class="fas fa-calendar-week"></i> 7-Day Forecast</div>
    <div class="forecast7" id="forecast7b"></div>
  </div>
</div>

<!-- ALERTS PAGE -->
<div class="page" id="page-alerts">
  <div class="alerts-page">
    <div class="section-head"><i class="fas fa-triangle-exclamation"></i> Active Weather Alerts</div>
    <div id="alertsContainer">
      <div style="text-align:center;padding:50px;color:var(--dim);">
        <div style="font-size:2.5rem;margin-bottom:12px;">‚úÖ</div>
        <div style="font-family:'Oswald',sans-serif;font-size:1.1rem;letter-spacing:3px;color:rgba(255,255,255,0.2);">NO ACTIVE ALERTS</div>
        <div style="font-size:0.8rem;margin-top:8px;">Search a location to check for weather alerts</div>
      </div>
    </div>
  </div>
</div>

<!-- HURRICANE PAGE -->
<div class="page" id="page-hurricane">
  <div class="hurricane-page">
    <div class="section-head"><i class="fas fa-hurricane"></i> Hurricane & Tropical Storm Tracker</div>
    <div class="hurricane-map-wrap">
      <div class="hurricane-map-toolbar">
        <span style="font-family:'Oswald',sans-serif;font-size:0.75rem;letter-spacing:2px;color:var(--dim);">üåÄ ACTIVE STORM TRACKS ‚Äî POWERED BY WINDY</span>
      </div>
      <iframe class="hurricane-map-frame" src="https://embed.windy.com/embed2.html?lat=25&lon=-70&detailLat=25&detailLon=-70&width=100%&height=450&zoom=3&level=surface&overlay=wind&product=ecmwf&menu=&message=&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=mph&metricTemp=%C2%B0F&radarRange=-1" frameborder="0"></iframe>
    </div>
    <div style="margin-top:20px;">
      <div class="section-head"><i class="fas fa-list"></i> Active Systems</div>
      <div id="stormContainer">
        <div class="no-storms"><div class="no-storms-icon">üåä</div><div class="no-storms-t">NO ACTIVE TROPICAL SYSTEMS</div><div class="no-storms-s">The Atlantic and Pacific basins are currently quiet.</div></div>
      </div>
    </div>
  </div>
</div>

<!-- AIR QUALITY PAGE -->
<div class="page" id="page-airquality">
  <div class="aq-page">
    <div class="section-head"><i class="fas fa-leaf"></i> Air Quality Index</div>
    <div class="aq-hero">
      <div class="aq-circle" id="aqCircle" style="border-color:#4ade80;color:#4ade80;">
        <div class="aq-circle-num" id="aqNum">--</div>
        <div class="aq-circle-lbl">AQI</div>
      </div>
      <div>
        <div style="font-family:'Oswald',sans-serif;font-size:1.4rem;font-weight:600;color:#fff;margin-bottom:4px;" id="aqStatus">Search a location</div>
        <div style="font-size:0.8rem;color:var(--dim);font-weight:300;line-height:1.6;" id="aqDesc">Air quality information will appear here once you search for a location.</div>
        <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;" id="aqBadges"></div>
      </div>
    </div>
    <div class="aq-details-grid" id="aqGrid">
      <div class="aq-detail"><div class="aq-detail-lbl">PM2.5</div><div class="aq-detail-val" id="aqPM25">-- Œºg/m¬≥</div></div>
      <div class="aq-detail"><div class="aq-detail-lbl">PM10</div><div class="aq-detail-val" id="aqPM10">-- Œºg/m¬≥</div></div>
      <div class="aq-detail"><div class="aq-detail-lbl">UV Index</div><div class="aq-detail-val" id="aqUV">--</div></div>
      <div class="aq-detail"><div class="aq-detail-lbl">Carbon Monoxide</div><div class="aq-detail-val" id="aqCO">-- ppb</div></div>
      <div class="aq-detail"><div class="aq-detail-lbl">Nitrogen Dioxide</div><div class="aq-detail-val" id="aqNO2">-- ppb</div></div>
      <div class="aq-detail"><div class="aq-detail-lbl">Ozone</div><div class="aq-detail-val" id="aqO3">-- ppb</div></div>
    </div>
  </div>
</div>

<!-- VIDEOS PAGE -->
<div class="page" id="page-videos">
  <div class="video-page">
    <div class="broadcast-hero">
      <div>
        <div class="broadcast-title">üì° Broadcast Studio</div>
        <div class="broadcast-sub">Go live with your green screen. Your camera feed with real-time chroma key removal broadcasts with live weather data overlays.</div>
      </div>
      <button class="go-live-btn" onclick="openStudio()"><i class="fas fa-circle" style="color:#ef4444;font-size:0.7rem;"></i> GO LIVE</button>
    </div>
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;flex-wrap:wrap;gap:10px;">
      <div class="section-head" style="margin-bottom:0;flex:1;min-width:200px;"><i class="fas fa-film"></i> Video Library</div>
      <button class="add-video-btn" onclick="toggleVideoForm()"><i class="fas fa-plus"></i> ADD VIDEO</button>
    </div>
    <div class="video-form-wrap" id="videoFormWrap">
      <div style="font-family:'Oswald',sans-serif;font-size:1rem;letter-spacing:3px;color:var(--gold);margin-bottom:16px;">ADD NEW VIDEO</div>
      <div class="form-grid-2">
        <div><label class="form-lbl">Title *</label><input class="form-inp" id="vTitle" placeholder="e.g. Storm Front Moving In"/></div>
        <div><label class="form-lbl">Category</label>
          <select class="form-sel" id="vCat">
            <option value="report">Weather Report</option><option value="live">Live Broadcast</option>
            <option value="clip">Field Clip</option><option value="upload">Uploaded Video</option>
          </select>
        </div>
        <div class="fg-full"><label class="form-lbl">YouTube / Video URL</label><input class="form-inp" id="vURL" placeholder="https://youtube.com/watch?v=..."/></div>
        <div class="fg-full"><label class="form-lbl">Or Upload Video File</label><input type="file" class="form-inp" id="vFile" accept="video/*" style="padding:8px;"/></div>
        <div class="fg-full"><label class="form-lbl">Description</label><textarea class="form-ta" id="vDesc" placeholder="Brief description‚Ä¶"></textarea></div>
      </div>
      <div class="form-actions-row">
        <button class="form-save-btn" onclick="saveVideo()">SAVE VIDEO</button>
        <button class="form-cancel-btn" onclick="toggleVideoForm()">CANCEL</button>
      </div>
    </div>
    <div class="video-grid" id="videoGrid"></div>
    <div class="video-empty" id="videoEmpty">
      <div class="video-empty-icon">üìπ</div>
      <div class="video-empty-t">No Videos Yet</div>
      <div class="video-empty-s">Click "Add Video" to post your first forecast or go live to start broadcasting</div>
    </div>
  </div>
</div>

<!-- NEWS PAGE -->
<div class="page" id="page-news">
  <div class="news-page">
    <div class="section-head"><i class="fas fa-newspaper"></i> Weather News & Blog</div>
    <div class="news-grid">
      <div class="news-feed" id="newsFeed"></div>
      <div class="news-sidebar">
        <div class="trending-box">
          <div class="widget-title"><i class="fas fa-fire"></i> Trending Topics</div>
          <div id="trendingList"></div>
        </div>
        <div class="widget">
          <div class="widget-title"><i class="fas fa-rss"></i> Subscribe</div>
          <div style="font-size:0.78rem;color:var(--dim);margin-bottom:12px;font-weight:300;line-height:1.6;">Get Smokey's Weather Network alerts and updates delivered to you.</div>
          <input class="form-inp" placeholder="Your email address‚Ä¶" style="margin-bottom:8px;"/>
          <button style="width:100%;background:var(--blue2);border:none;color:#fff;padding:10px;border-radius:5px;font-family:'Oswald',sans-serif;letter-spacing:3px;font-size:0.85rem;">SUBSCRIBE</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TICKER -->
<div class="site-ticker">
  <div class="ticker-lbl"><i class="fas fa-bolt"></i>&nbsp;SWN</div>
  <div class="ticker-scroll-wrap">
    <div class="ticker-text" id="tickerText">Smokey's Weather Network ‚Äî Loading live data‚Ä¶</div>
  </div>
</div>

</div><!-- end main site -->

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//   SMOKEY'S WEATHER NETWORK ‚Äî FULL JS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// ‚îÄ‚îÄ STARS ‚îÄ‚îÄ
(function(){
  const sf=document.getElementById('starfield');
  for(let i=0;i<120;i++){
    const s=document.createElement('div');const sz=Math.random()*2+0.4;
    s.className='star';s.style.cssText=`width:${sz}px;height:${sz}px;top:${Math.random()*100}%;left:${Math.random()*100}%;--d:${(Math.random()*4+1).toFixed(1)}s;--lo:${(Math.random()*0.15+0.03).toFixed(2)};--hi:${(Math.random()*0.5+0.15).toFixed(2)};`;
    sf.appendChild(s);
  }
})();

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
let unit='F',wxData=null,currentCity='',currentLat=0,currentLon=0;
let videos=JSON.parse(localStorage.getItem('swn_videos')||'[]');
let customAlerts=JSON.parse(localStorage.getItem('swn_alerts')||'[]');
let autoAlerts=[];
let studioStream=null,studioActive=false,studioBgMode='radar';
let studioAnimId=null,studioBgAnimId=null;
let studioChromaEnabled=true;
let studioChromaR=0,studioChromaG=255,studioChromaB=0,studioChromaThresh=60,studioChromaSmooth=12;
let studioFacingMode='environment';
let studioViewerCount=Math.floor(Math.random()*80)+5;
let bgAnimFrame=0;

// ‚îÄ‚îÄ SECURITY STATE ‚îÄ‚îÄ
// PIN is stored as a simple hash ‚Äî not exposed in plaintext in a visible variable name
const _k=(s)=>btoa(unescape(encodeURIComponent(s))).split('').reverse().join('');
const _u=(s)=>decodeURIComponent(escape(atob(s.split('').reverse().join(''))));
let _ph=localStorage.getItem('swn_aph')||_k('180019975848');
let _pf=parseInt(localStorage.getItem('swn_pf')||'0');
let _pll=parseInt(localStorage.getItem('swn_pll')||'0');
const PIN_MAX_ATTEMPTS=3;
const PIN_LOCKOUT_MS=30000;
let _pinBuf='';
let _tapCount=0,_tapTimer=null;
const TAP_WINDOW=2200,TAP_NEEDED=10;

// ‚îÄ‚îÄ ADMIN SETTINGS ‚îÄ‚îÄ
let adminSettings=JSON.parse(localStorage.getItem('swn_admin_settings')||'{}');

// WMO codes
const WMO={
  0:['Clear Sky','‚òÄÔ∏è'],1:['Mainly Clear','üå§Ô∏è'],2:['Partly Cloudy','‚õÖ'],3:['Overcast','‚òÅÔ∏è'],
  45:['Foggy','üå´Ô∏è'],48:['Freezing Fog','üå´Ô∏è'],51:['Light Drizzle','üå¶Ô∏è'],53:['Drizzle','üå¶Ô∏è'],55:['Heavy Drizzle','üåßÔ∏è'],
  61:['Light Rain','üåßÔ∏è'],63:['Rain','üåßÔ∏è'],65:['Heavy Rain','üåßÔ∏è'],71:['Light Snow','üå®Ô∏è'],73:['Snow','‚ùÑÔ∏è'],75:['Heavy Snow','‚ùÑÔ∏è'],77:['Snow Grains','üå®Ô∏è'],
  80:['Light Showers','üå¶Ô∏è'],81:['Showers','üåßÔ∏è'],82:['Heavy Showers','‚õàÔ∏è'],85:['Snow Showers','üå®Ô∏è'],86:['Heavy Snow Showers','‚ùÑÔ∏è'],
  95:['Thunderstorm','‚õàÔ∏è'],96:['T-storm w/ Hail','‚õàÔ∏è'],99:['Severe Thunderstorm','üå™Ô∏è']
};

// ‚îÄ‚îÄ CLOCK ‚îÄ‚îÄ
function updateClock(){
  const n=new Date();
  document.getElementById('clockTime').textContent=n.toLocaleTimeString('en-US',{hour12:true});
  document.getElementById('clockDate').textContent=n.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});
}
updateClock();setInterval(updateClock,1000);

// ‚îÄ‚îÄ PAGE NAV ‚îÄ‚îÄ
function showPage(id,btn){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  if(btn)btn.classList.add('active');
}

// ‚îÄ‚îÄ UNIT ‚îÄ‚îÄ
function setUnit(u){
  unit=u;
  document.getElementById('btnF').classList.toggle('on',u==='F');
  document.getElementById('btnC').classList.toggle('on',u==='C');
  if(wxData)renderWeather(wxData);
}
const toF=c=>(c*9/5)+32;
const dT=c=>unit==='F'?Math.round(toF(c)):Math.round(c);
const tStr=c=>`${dT(c)}¬∞${unit}`;
const windStr=v=>unit==='F'?`${Math.round(v)} mph`:`${Math.round(v*1.609)} km/h`;
function wDir(deg){return['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW'][Math.round(deg/22.5)%16];}
function fmtTime(iso){if(!iso)return'--:--';return new Date(iso).toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true});}
function fmtHour(iso){if(!iso)return'--';const d=new Date(iso);const h=d.getHours();return h===0?'12 AM':h<12?`${h} AM`:h===12?'12 PM':`${h-12} PM`;}

// ‚îÄ‚îÄ WEATHER EFFECTS ‚îÄ‚îÄ
function buildRain(n){const c=document.getElementById('rainWrap');c.innerHTML='';for(let i=0;i<n;i++){const d=document.createElement('div');const h=Math.random()*60+20;d.className='rdrop';d.style.cssText=`left:${Math.random()*100}%;top:${Math.random()*-80}px;height:${h}px;animation-duration:${(Math.random()*0.5+0.55).toFixed(2)}s;animation-delay:${(Math.random()*3).toFixed(2)}s;`;c.appendChild(d);}}
function buildSnow(n){const c=document.getElementById('snowWrap');c.innerHTML='';for(let i=0;i<n;i++){const d=document.createElement('div');const sz=Math.random()*4+2;d.className='snowflake';d.style.cssText=`left:${Math.random()*100}%;top:${Math.random()*-40}px;width:${sz}px;height:${sz}px;animation-duration:${(Math.random()*5+4).toFixed(1)}s;animation-delay:${(Math.random()*6).toFixed(1)}s;`;c.appendChild(d);}}
function applyFX(code){
  if(adminSettings.particlesEnabled===false)return;
  const r=document.getElementById('rainWrap'),s=document.getElementById('snowWrap'),l=document.getElementById('lflash');
  r.style.opacity='0';s.style.opacity='0';clearInterval(window._li);
  if([51,53,55,61,63,65,80,81,82,95,96,99].includes(code)){buildRain([95,96,99].includes(code)?90:55);r.style.opacity=[95,96,99].includes(code)?'0.75':'0.55';}
  if([71,73,75,77,85,86].includes(code)){buildSnow(45);s.style.opacity='0.85';}
  if([95,96,99].includes(code)){window._li=setInterval(()=>{if(Math.random()>0.65){l.style.opacity='1';setTimeout(()=>l.style.opacity='0',70+Math.random()*130);}},2200);}
}

function updateSunArc(rISO,sISO){
  const now=Date.now(),r=new Date(rISO).getTime(),s=new Date(sISO).getTime();
  const t=Math.max(0,Math.min(1,(now-r)/(s-r)));
  const x=(1-t)*(1-t)*10+2*(1-t)*t*100+t*t*190;
  const y=(1-t)*(1-t)*55+2*(1-t)*t*5+t*t*55;
  ['sunDot','sunGlow'].forEach(id=>{document.getElementById(id).setAttribute('cx',x);document.getElementById(id).setAttribute('cy',y);});
}

// ‚îÄ‚îÄ AQI ‚îÄ‚îÄ
async function fetchAQI(lat,lon){
  try{
    const url=`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${lat}&longitude=${lon}&current=pm2_5,pm10,carbon_monoxide,nitrogen_dioxide,ozone,uv_index,european_aqi`;
    const res=await fetch(url);const data=await res.json();const c=data.current;
    const aqi=Math.round(c.european_aqi||0);
    let aqiColor='#4ade80',aqiClass='aqi-good',aqiLabel='Good',aqiDesc='Air quality is satisfactory.';
    if(aqi>50){aqiColor='#facc15';aqiClass='aqi-moderate';aqiLabel='Moderate';aqiDesc='Air quality is acceptable.';}
    if(aqi>100){aqiColor='#fb923c';aqiClass='aqi-unhealthy';aqiLabel='Unhealthy for Sensitive Groups';aqiDesc='Sensitive groups may experience health effects.';}
    if(aqi>150){aqiColor='#ef4444';aqiClass='aqi-bad';aqiLabel='Unhealthy';aqiDesc='Everyone may experience health effects.';}
    document.getElementById('aqNum').textContent=aqi;document.getElementById('aqStatus').textContent=aqiLabel;document.getElementById('aqDesc').textContent=aqiDesc;
    document.getElementById('aqCircle').style.borderColor=aqiColor;document.getElementById('aqCircle').style.color=aqiColor;
    document.getElementById('wAQI').textContent=aqi;document.getElementById('wAQI').style.color=aqiColor;
    document.getElementById('wAQILabel').textContent=aqiLabel;document.getElementById('wAQILabel').className='aqi-label '+aqiClass;
    document.getElementById('wAQIBar').style.width=Math.min(aqi/200*100,100)+'%';
    document.getElementById('wAQIBar').style.background=`linear-gradient(90deg,${aqiColor}99,${aqiColor})`;
    document.getElementById('aqPM25').textContent=`${(c.pm2_5||0).toFixed(1)} Œºg/m¬≥`;
    document.getElementById('aqPM10').textContent=`${(c.pm10||0).toFixed(1)} Œºg/m¬≥`;
    document.getElementById('aqUV').textContent=(c.uv_index||0).toFixed(1);
    document.getElementById('aqCO').textContent=`${(c.carbon_monoxide||0).toFixed(0)} ppb`;
    document.getElementById('aqNO2').textContent=`${(c.nitrogen_dioxide||0).toFixed(1)} ppb`;
    document.getElementById('aqO3').textContent=`${(c.ozone||0).toFixed(1)} ppb`;
  }catch(e){}
}

// ‚îÄ‚îÄ AUTO ALERTS ‚îÄ‚îÄ
async function fetchAlerts(lat,lon){
  try{
    const url=`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=weather_code&daily=weather_code,temperature_2m_max&timezone=auto&forecast_days=1`;
    const res=await fetch(url);const d=await res.json();const code=d.current.weather_code;
    autoAlerts=[];
    if([95,96,99].includes(code))autoAlerts.push({title:'Thunderstorm Warning',sev:'severe',area:'Your Area',body:'A thunderstorm warning is in effect. Dangerous lightning and strong winds expected.',eff:'Now',exp:'Until conditions improve'});
    if(d.daily.temperature_2m_max[0]>38)autoAlerts.push({title:'Extreme Heat Advisory',sev:'moderate',area:'Your Area',body:'Dangerous heat conditions expected. Stay hydrated.',eff:'Today',exp:'This evening'});
    if(d.daily.temperature_2m_max[0]<-15)autoAlerts.push({title:'Wind Chill Warning',sev:'extreme',area:'Your Area',body:'Dangerously cold wind chill values. Frostbite possible.',eff:'Now',exp:'Tomorrow morning'});
    if([71,73,75].includes(code))autoAlerts.push({title:'Winter Storm Advisory',sev:'moderate',area:'Your Area',body:'Snow accumulations expected. Hazardous road conditions likely.',eff:'Now',exp:'Until clearing'});
    renderAlerts([...customAlerts,...autoAlerts]);
  }catch(e){}
}

function renderAlerts(alerts){
  const badge=document.getElementById('alertBadge');const widget=document.getElementById('alertWidget');
  const container=document.getElementById('alertsContainer');const list=document.getElementById('alertList');const count=document.getElementById('alertCount');
  if(alerts.length===0){
    badge.classList.remove('show');widget.classList.remove('show');
    container.innerHTML='<div style="text-align:center;padding:50px;color:var(--dim);"><div style="font-size:2.5rem;margin-bottom:12px;">‚úÖ</div><div style="font-family:\'Oswald\',sans-serif;font-size:1.1rem;letter-spacing:3px;color:rgba(255,255,255,0.2);">NO ACTIVE ALERTS</div><div style="font-size:0.8rem;margin-top:8px;">No weather alerts at this time</div></div>';
    return;
  }
  if(adminSettings.alertBadgeEnabled!==false){badge.classList.add('show');document.getElementById('alertBadgeText').textContent=`${alerts.length} ALERT${alerts.length>1?'S':''}`;}
  widget.classList.add('show');count.textContent=alerts.length;
  list.innerHTML=alerts.slice(0,3).map(a=>`<div class="alert-item"><i class="fas fa-circle-exclamation alert-icon-sm"></i><div>${a.title}</div></div>`).join('');
  container.innerHTML=alerts.map(a=>{
    const s={extreme:'alert-extreme sev-extreme',severe:'alert-severe sev-severe',moderate:'alert-moderate sev-moderate',minor:'alert-minor sev-minor'};
    const [cc,sc]=(s[a.sev]||'alert-minor sev-minor').split(' ');
    return`<div class="alert-full-card ${cc}"><div class="alert-full-head"><div class="alert-full-title">${a.title}</div><span class="alert-full-sev ${sc}">${a.sev.toUpperCase()}</span></div><div class="alert-full-area"><i class="fas fa-location-dot"></i> ${a.area}</div><div class="alert-full-body">${a.body}</div><div class="alert-full-times"><span><i class="fas fa-clock"></i> Effective: ${a.eff}</span><span><i class="fas fa-hourglass-end"></i> Expires: ${a.exp}</span></div></div>`;
  }).join('');
  // Update admin alert count
  document.getElementById('aStatAlerts').textContent=alerts.length;
}

// ‚îÄ‚îÄ TICKER ‚îÄ‚îÄ
function buildTicker(city){
  if(!wxData)return;
  const c=wxData.current,d=wxData.daily;
  const[lbl]=WMO[c.weather_code]||['Unknown'];
  const custom=document.getElementById('edit-ticker')?.value?.trim();
  if(custom){document.getElementById('tickerText').innerHTML=custom;if(document.getElementById('studioTickerInner'))document.getElementById('studioTickerInner').innerHTML=custom;return;}
  const items=[`üìç ${city} ‚Äî ${lbl} ¬∑ ${tStr(c.temperature_2m)} ¬∑ Feels like ${tStr(c.apparent_temperature)}`,`üíß Humidity ${c.relative_humidity_2m}% ¬∑ üí® Wind ${windStr(c.wind_speed_10m)} ${wDir(c.wind_direction_10m)} ¬∑ üîµ Pressure ${Math.round(c.surface_pressure)} hPa`,`üìÖ Tomorrow: High ${tStr(d.temperature_2m_max[1])} / Low ${tStr(d.temperature_2m_min[1])}`,`üåÖ Sunrise ${fmtTime(d.sunrise[0])} ¬∑ üåá Sunset ${fmtTime(d.sunset[0])} ¬∑ ‚òÄÔ∏è UV ${(c.uv_index||0).toFixed(1)}`,`üì° Smokey's Weather Network ¬∑ Live Data ¬∑ Powered by Open-Meteo`];
  const sep='<span class="t-sep">‚óÜ</span>';
  const content=items.join(sep)+sep+items.join(sep);
  document.getElementById('tickerText').innerHTML=content;
  if(document.getElementById('studioTickerInner'))document.getElementById('studioTickerInner').innerHTML=content;
}

// ‚îÄ‚îÄ RENDER WEATHER ‚îÄ‚îÄ
function renderWeather(data){
  const c=data.current,d=data.daily,h=data.hourly;
  const[lbl,ico]=WMO[c.weather_code]||['Unknown','‚ùì'];
  document.getElementById('heroTemp').textContent=dT(c.temperature_2m);
  document.getElementById('heroUnit').textContent=`¬∞${unit}`;
  document.getElementById('heroIcon').textContent=ico;
  document.getElementById('heroCond').textContent=lbl;
  document.getElementById('heroAttr').textContent='Live ¬∑ Open-Meteo GFS + ERA5 Model ¬∑ Updates every 15 min';
  document.getElementById('sHumidity').textContent=`${c.relative_humidity_2m}%`;
  document.getElementById('sWind').textContent=windStr(c.wind_speed_10m);
  document.getElementById('sVis').textContent=unit==='F'?`${(c.visibility/1609.34).toFixed(1)}mi`:`${(c.visibility/1000).toFixed(1)}km`;
  document.getElementById('sPressure').textContent=`${Math.round(c.surface_pressure)}hPa`;
  document.getElementById('sDew').textContent=tStr(c.dew_point_2m);
  document.getElementById('sCloud').textContent=`${c.cloud_cover}%`;
  document.getElementById('sUV').textContent=(c.uv_index||0).toFixed(1);
  document.getElementById('sPrecip').textContent=unit==='F'?`${(c.precipitation*0.0394).toFixed(2)}"`:`${c.precipitation.toFixed(1)}mm`;
  const fl=dT(c.apparent_temperature);
  document.getElementById('wFeels').textContent=`${fl}¬∞`;
  const diff=c.apparent_temperature-c.temperature_2m;
  document.getElementById('wFeelsDesc').textContent=diff<-3?'Wind chill makes it feel colder':diff>3?'Humidity makes it feel warmer':'Close to actual temperature';
  document.getElementById('wFeelsBar').style.width=Math.min(Math.max((c.apparent_temperature+20)/80*100,5),95)+'%';
  document.getElementById('wWindBig').textContent=windStr(c.wind_speed_10m);
  document.getElementById('wWindDir').textContent=`Direction: ${wDir(c.wind_direction_10m)} (${Math.round(c.wind_direction_10m)}¬∞)`;
  document.getElementById('wWindGust').textContent=`Gusts: ${windStr(c.wind_gusts_10m||c.wind_speed_10m)}`;
  document.getElementById('wWindBar').style.width=Math.min(c.wind_speed_10m/65*100,100)+'%';
  document.getElementById('sunRise').textContent=fmtTime(d.sunrise[0]);
  document.getElementById('sunSet').textContent=fmtTime(d.sunset[0]);
  updateSunArc(d.sunrise[0],d.sunset[0]);
  render7Day(d,'forecast7');render7Day(d,'forecast7b');
  renderHourly(h,'hourlyScroll');renderHourly(h,'hourlyScroll2');
  applyFX(c.weather_code);
  buildTicker(currentCity);
  // Studio overlays
  document.getElementById('studioCity').textContent=`üìç ${currentCity}`;
  document.getElementById('studioTemp').textContent=`${dT(c.temperature_2m)}¬∞${unit} ‚Äî ${lbl}`;
  document.getElementById('studioCond').textContent=`Humidity ${c.relative_humidity_2m}% ¬∑ Wind ${windStr(c.wind_speed_10m)} ${wDir(c.wind_direction_10m)}`;
  // Admin stats
  document.getElementById('aStatCity').textContent=currentCity.substring(0,10)||(currentCity.length>10?'‚Ä¶':'');
  document.getElementById('aStatTemp').textContent=`${dT(c.temperature_2m)}¬∞`;
}

function render7Day(d,elId){
  const el=document.getElementById(elId);if(!el)return;
  const days=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];el.innerHTML='';
  for(let i=0;i<7;i++){
    const date=new Date(d.time[i]);const[,ico]=WMO[d.weather_code[i]]||['--','‚ùì'];
    const precip=d.precipitation_sum[i];const div=document.createElement('div');div.className='fday'+(i===0?' today':'');
    div.innerHTML=`<div class="fday-name">${i===0?'Today':days[date.getDay()]}</div><div class="fday-icon">${ico}</div><div class="fday-hi">${dT(d.temperature_2m_max[i])}¬∞</div><div class="fday-lo">${dT(d.temperature_2m_min[i])}¬∞</div><div class="fday-precip">${precip>0?(unit==='F'?(precip*0.0394).toFixed(2)+'"':precip.toFixed(1)+'mm'):'‚Äî'}</div>`;
    el.appendChild(div);
  }
}

function renderHourly(h,elId){
  const el=document.getElementById(elId);if(!el)return;el.innerHTML='';
  const now=new Date();let startIdx=0;
  for(let i=0;i<h.time.length;i++){if(new Date(h.time[i])>=now){startIdx=i;break;}}
  const count=elId==='hourlyScroll2'?48:24;
  for(let i=startIdx;i<Math.min(startIdx+count,h.time.length);i++){
    const[,ico]=WMO[h.weather_code[i]]||['--','‚ùì'];const div=document.createElement('div');div.className='hour-card'+(i===startIdx?' now':'');
    div.innerHTML=`<div class="hour-time">${i===startIdx?'NOW':fmtHour(h.time[i])}</div><div class="hour-icon">${ico}</div><div class="hour-temp">${dT(h.temperature_2m[i])}¬∞</div><div class="hour-precip">${h.precipitation_probability?.[i]||0}% üíß</div>`;
    el.appendChild(div);
  }
}

// ‚îÄ‚îÄ FETCH WEATHER ‚îÄ‚îÄ
async function fetchWeather(lat,lon,city,region){
  document.getElementById('siteLoader').classList.remove('gone');
  document.getElementById('errMsg').classList.remove('show');
  currentLat=lat;currentLon=lon;currentCity=city;
  try{
    const url=`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,apparent_temperature,relative_humidity_2m,dew_point_2m,precipitation,weather_code,cloud_cover,surface_pressure,wind_speed_10m,wind_direction_10m,wind_gusts_10m,visibility,uv_index&hourly=temperature_2m,weather_code,precipitation_probability&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_sum,sunrise,sunset&wind_speed_unit=mph&forecast_days=7&timezone=auto`;
    const res=await fetch(url);if(!res.ok)throw new Error('');
    const data=await res.json();wxData=data;
    document.getElementById('heroCity').textContent=city;document.getElementById('heroRegion').textContent=region||'';
    renderWeather(data);
    await Promise.all([fetchAQI(lat,lon),fetchAlerts(lat,lon)]);
    document.getElementById('radarFrame').src=`https://embed.windy.com/embed2.html?lat=${lat}&lon=${lon}&detailLat=${lat}&detailLon=${lon}&width=100%&height=520&zoom=7&level=surface&overlay=rain&product=ecmwf&menu=&message=&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=mph&metricTemp=%C2%B0F&radarRange=-1`;
    loadNews();
  }catch(e){
    document.getElementById('errMsg').textContent='Failed to load weather data. Please try again.';
    document.getElementById('errMsg').classList.add('show');
  }finally{document.getElementById('siteLoader').classList.add('gone');}
}

async function doSearch(){
  const val=document.getElementById('citySearch').value.trim();if(!val)return;
  document.getElementById('errMsg').classList.remove('show');
  try{
    const res=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(val)}&count=1&language=en&format=json`);
    const data=await res.json();if(!data.results?.length)throw new Error('');
    const g=data.results[0];
    await fetchWeather(g.latitude,g.longitude,g.name,`${g.admin1||''} ${g.country_code||''}`.trim());
  }catch(e){document.getElementById('siteLoader').classList.add('gone');document.getElementById('errMsg').textContent='Location not found.';document.getElementById('errMsg').classList.add('show');}
}

function doLocate(){
  if(!navigator.geolocation)return;
  document.getElementById('siteLoader').classList.remove('gone');
  navigator.geolocation.getCurrentPosition(async pos=>{
    const{latitude:lat,longitude:lon}=pos.coords;
    try{
      const res=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`);
      const g=await res.json();
      const city=g.address.city||g.address.town||g.address.village||'Your Location';
      const region=`${g.address.state||''} ${(g.address.country_code||'').toUpperCase()}`.trim();
      await fetchWeather(lat,lon,city,region);
    }catch{await fetchWeather(lat,lon,'Your Location','');}
  },()=>{document.getElementById('siteLoader').classList.add('gone');});
}

document.getElementById('citySearch').addEventListener('keydown',e=>{if(e.key==='Enter')doSearch();});
setInterval(()=>{if(currentLat&&currentLon)fetchWeather(currentLat,currentLon,currentCity,'');},15*60*1000);

// ‚îÄ‚îÄ RADAR ‚îÄ‚îÄ
function switchRadar(type,btn){
  document.querySelectorAll('.radar-type-btn').forEach(b=>b.classList.remove('on'));if(btn)btn.classList.add('on');
  const m={rain:'rain',wind:'wind',temp:'temp',cloud:'clouds'};
  const lat=currentLat||39,lon=currentLon||-98,zoom=currentLat?7:4;
  document.getElementById('radarFrame').src=`https://embed.windy.com/embed2.html?lat=${lat}&lon=${lon}&detailLat=${lat}&detailLon=${lon}&width=100%&height=520&zoom=${zoom}&level=surface&overlay=${m[type]||'rain'}&product=ecmwf&menu=&message=&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=mph&metricTemp=%C2%B0F&radarRange=-1`;
}

// ‚îÄ‚îÄ NEWS ‚îÄ‚îÄ
const BASE_NEWS=[
  {cat:'Severe Weather',icon:'‚õàÔ∏è',headline:'Historic Storm System Tracks Across Central Plains',snippet:'Meteorologists tracking a powerful low-pressure system bringing severe thunderstorm and tornado threats.',time:'2 hours ago',src:'SWN Staff'},
  {cat:'Climate',icon:'üå°Ô∏è',headline:'Record High Temperatures Expected Across Southwest',snippet:'A sprawling heat dome is pushing temperatures to record levels across the Desert Southwest.',time:'4 hours ago',src:'SWN Staff'},
  {cat:'Winter Weather',icon:'‚ùÑÔ∏è',headline:'Early Season Snow Event Possible for Northern Rockies',snippet:'A sharp cold front is set to deliver the first significant snowfall of the season to Montana and Wyoming.',time:'6 hours ago',src:'SWN Staff'},
  {cat:'Tropical',icon:'üåÄ',headline:'Tropical Disturbance in Atlantic Being Monitored by NHC',snippet:'The NHC is monitoring a disturbance in the central Atlantic with moderate development chance.',time:'8 hours ago',src:'SWN Staff'},
  {cat:'Forecast',icon:'üå§Ô∏è',headline:'Weekend Outlook: Mostly Pleasant Conditions Expected',snippet:'A tranquil weather pattern is setting up with below-normal temperatures and low precipitation chances.',time:'12 hours ago',src:'SWN Staff'},
];
let customNews=JSON.parse(localStorage.getItem('swn_news')||'[]');
const TRENDING=['Hurricane Season 2025 Forecast','Record Heat Wave Southwest','La Ni√±a Winter Outlook','Tornado Alley Activity','Great Lakes Snow Belt Update'];

function loadNews(){
  const all=[...customNews,...BASE_NEWS];
  document.getElementById('newsFeed').innerHTML=all.map(s=>`<div class="news-card"><div class="news-cat-icon">${s.icon}</div><div class="news-content"><div class="news-cat-tag">${s.cat}</div><div class="news-headline">${s.headline}</div><div class="news-snippet">${s.snippet}</div><div class="news-meta"><span><i class="fas fa-clock"></i> ${s.time}</span><span><i class="fas fa-user"></i> ${s.src}</span></div></div></div>`).join('');
  document.getElementById('trendingList').innerHTML=TRENDING.map((t,i)=>`<div class="trending-item"><div class="trending-num">${i+1}</div><div class="trending-text">${t}</div></div>`).join('');
}
loadNews();

// ‚îÄ‚îÄ VIDEOS ‚îÄ‚îÄ
function renderVideos(){
  const grid=document.getElementById('videoGrid'),empty=document.getElementById('videoEmpty');
  if(!videos.length){grid.innerHTML='';empty.classList.add('show');return;}
  empty.classList.remove('show');
  const tagMap={report:'tag-report',live:'tag-live',clip:'tag-clip',upload:'tag-upload'};
  const tagLabel={report:'Weather Report',live:'Live Broadcast',clip:'Field Clip',upload:'Uploaded'};
  grid.innerHTML=videos.map((v,i)=>{
    let thumbHTML='';
    if(v.ytId){thumbHTML=`<img src="https://img.youtube.com/vi/${v.ytId}/hqdefault.jpg" alt="${v.title}"/>`;}
    else if(v.fileData){thumbHTML=`<video src="${v.fileData}" style="width:100%;height:100%;object-fit:cover;" preload="metadata"></video>`;}
    else{thumbHTML=`<div class="video-thumb-placeholder"><div style="font-size:2rem;">üìπ</div><div style="font-size:0.72rem;letter-spacing:1px;">VIDEO CLIP</div></div>`;}
    return`<div class="video-card"><div class="video-thumb" onclick="playVideo(${i})">${thumbHTML}<div class="video-play-overlay"><div class="play-circle">‚ñ∂</div></div></div><div class="video-body"><div class="video-tag-row"><span class="video-tag ${tagMap[v.cat]||'tag-clip'}">${tagLabel[v.cat]||'Clip'}</span><span class="video-date">${v.date}</span></div><div class="video-title">${v.title}</div><div class="video-desc">${v.desc||'No description.'}</div><div class="video-actions"><button class="v-act-btn" onclick="playVideo(${i})"><i class="fas fa-play"></i> Play</button><button class="v-act-btn del" onclick="deleteVideo(${i})"><i class="fas fa-trash"></i> Delete</button></div></div></div>`;
  }).join('');
  document.getElementById('aStatVideos').textContent=videos.length;
  document.getElementById('aVideoCount').textContent=videos.length;
  renderAdminVideoList();
}
renderVideos();

function toggleVideoForm(){document.getElementById('videoFormWrap').classList.toggle('open');}

function saveVideo(){
  const title=document.getElementById('vTitle').value.trim();if(!title)return;
  const url=document.getElementById('vURL').value.trim();const file=document.getElementById('vFile').files[0];
  const cat=document.getElementById('vCat').value;const desc=document.getElementById('vDesc').value.trim();
  const vid={title,cat,desc,date:new Date().toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'})};
  const ytMatch=url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]{11})/);
  if(ytMatch)vid.ytId=ytMatch[1];else if(url)vid.url=url;
  if(file){
    const reader=new FileReader();
    reader.onload=e=>{vid.fileData=e.target.result;videos.unshift(vid);saveVideos();renderVideos();toggleVideoForm();resetVForm();};
    reader.readAsDataURL(file);return;
  }
  videos.unshift(vid);saveVideos();renderVideos();toggleVideoForm();resetVForm();
}
function saveVideos(){localStorage.setItem('swn_videos',JSON.stringify(videos));}
function resetVForm(){['vTitle','vURL','vDesc'].forEach(id=>document.getElementById(id).value='');document.getElementById('vFile').value='';}
function deleteVideo(i){if(!confirm('Delete this video?'))return;videos.splice(i,1);saveVideos();renderVideos();}
function playVideo(i){
  const v=videos[i];const modal=document.getElementById('videoModal');const frame=document.getElementById('videoModalFrame');
  if(v.ytId){frame.innerHTML=`<iframe src="https://www.youtube.com/embed/${v.ytId}?autoplay=1" allow="autoplay;fullscreen" allowfullscreen></iframe>`;}
  else if(v.fileData){frame.innerHTML=`<video src="${v.fileData}" controls autoplay style="width:100%;height:100%;"></video>`;}
  else{frame.innerHTML=`<div style="display:flex;align-items:center;justify-content:center;height:100%;color:var(--dim);font-family:'Oswald',sans-serif;letter-spacing:3px;">NO PLAYBACK AVAILABLE</div>`;}
  modal.classList.add('open');
}
function closeVideoModal(){document.getElementById('videoModal').classList.remove('open');document.getElementById('videoModalFrame').innerHTML='';}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADMIN PORTAL SECURITY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// ‚îÄ‚îÄ SECRET TAP TRIGGER (10 taps on logo within 2.2s) ‚îÄ‚îÄ
function handleLogoTap(){
  const mark=document.getElementById('logoMark');
  mark.classList.add('tap-flash');
  setTimeout(()=>mark.classList.remove('tap-flash'),200);
  _tapCount++;
  updateTapDots(_tapCount);
  if(_tapTimer)clearTimeout(_tapTimer);
  if(_tapCount>=TAP_NEEDED){
    _tapCount=0;updateTapDots(0);hideTapIndicator();
    setTimeout(()=>openAdminPin(),150);
    return;
  }
  document.getElementById('tapIndicator').classList.add('show');
  _tapTimer=setTimeout(()=>{_tapCount=0;updateTapDots(0);hideTapIndicator();},TAP_WINDOW);
}

function updateTapDots(n){
  for(let i=0;i<10;i++){
    document.getElementById('td'+i).classList.toggle('lit',i<n);
  }
}
function hideTapIndicator(){document.getElementById('tapIndicator').classList.remove('show');}

// ‚îÄ‚îÄ PIN GATE ‚îÄ‚îÄ
function openAdminPin(){
  // Check lockout
  const now=Date.now();
  if(_pf>=PIN_MAX_ATTEMPTS&&(now-_pll)<PIN_LOCKOUT_MS){
    startLockoutTimer(Math.ceil((PIN_LOCKOUT_MS-(now-_pll))/1000));
    document.getElementById('adminPinOverlay').classList.add('open');
    document.getElementById('pinLockoutMsg').classList.add('show');
    return;
  }
  _pinBuf='';
  updatePinDots();
  document.getElementById('pinErrMsg').textContent='';
  document.getElementById('pinLockoutMsg').classList.remove('show');
  document.getElementById('adminPinOverlay').classList.add('open');
}

function closeAdminPin(){
  document.getElementById('adminPinOverlay').classList.remove('open');
  _pinBuf='';updatePinDots();
}

function pinPress(digit){
  const now=Date.now();
  if(_pf>=PIN_MAX_ATTEMPTS&&(now-_pll)<PIN_LOCKOUT_MS)return;
  if(_pinBuf.length>=12)return;
  _pinBuf+=digit;
  updatePinDots();
  if(_pinBuf.length===12)setTimeout(checkPin,120);
}

function pinBackspace(){_pinBuf=_pinBuf.slice(0,-1);updatePinDots();}

function updatePinDots(){
  for(let i=0;i<12;i++){
    const dot=document.getElementById('pd'+i);
    dot.classList.remove('filled','error');
    if(i<_pinBuf.length)dot.classList.add('filled');
  }
}

function checkPin(){
  if(_k(_pinBuf)===_ph){
    // SUCCESS
    _pf=0;localStorage.setItem('swn_pf','0');
    closeAdminPin();
    setTimeout(()=>openAdminPortal(),100);
  }else{
    // FAIL
    _pf++;localStorage.setItem('swn_pf',String(_pf));
    localStorage.setItem('swn_pll',String(Date.now()));
    _pll=Date.now();
    document.getElementById('sec-fail-count').textContent=_pf;
    for(let i=0;i<12;i++){const dot=document.getElementById('pd'+i);dot.classList.remove('filled');dot.classList.add('error');}
    if(_pf>=PIN_MAX_ATTEMPTS){
      document.getElementById('pinErrMsg').textContent='';
      startLockoutTimer(30);
    }else{
      document.getElementById('pinErrMsg').textContent=`Incorrect. ${PIN_MAX_ATTEMPTS-_pf} attempt${PIN_MAX_ATTEMPTS-_pf!==1?'s':''} remaining.`;
    }
    setTimeout(()=>{_pinBuf='';updatePinDots();},800);
  }
}

let _lockTimer=null;
function startLockoutTimer(secs){
  document.getElementById('pinLockoutMsg').classList.add('show');
  let s=secs;document.getElementById('lockoutTimer').textContent=s;
  if(_lockTimer)clearInterval(_lockTimer);
  _lockTimer=setInterval(()=>{s--;document.getElementById('lockoutTimer').textContent=s;if(s<=0){clearInterval(_lockTimer);_pf=0;localStorage.setItem('swn_pf','0');document.getElementById('pinLockoutMsg').classList.remove('show');}},1000);
}

// Keyboard support for PIN
document.addEventListener('keydown',e=>{
  if(!document.getElementById('adminPinOverlay').classList.contains('open'))return;
  if(/[0-9]/.test(e.key))pinPress(e.key);
  if(e.key==='Backspace')pinBackspace();
  if(e.key==='Escape')closeAdminPin();
});

// ‚îÄ‚îÄ ADMIN PORTAL ‚îÄ‚îÄ
function openAdminPortal(){
  document.getElementById('adminPortal').classList.add('open');
  refreshAdminPanels();
}
function closeAdminPortal(){document.getElementById('adminPortal').classList.remove('open');}

function switchAdminTab(id,tabBtn,sideBtn){
  document.querySelectorAll('.admin-panel').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.admin-tab').forEach(b=>b.classList.remove('active'));
  document.querySelectorAll('.admin-nav-item').forEach(b=>b.classList.remove('active'));
  const panel=document.getElementById('apanel-'+id);if(panel)panel.classList.add('active');
  if(tabBtn)tabBtn.classList.add('active');
  if(sideBtn)sideBtn.classList.add('active');
  // Sync sidebar/tabs
  document.querySelectorAll('.admin-tab').forEach(b=>{if(b.onclick&&b.onclick.toString().includes("'"+id+"'"))b.classList.add('active');});
  document.querySelectorAll('.admin-nav-item').forEach(b=>{if(b.onclick&&b.onclick.toString().includes("'"+id+"'"))b.classList.add('active');});
  refreshAdminPanels();
}

function refreshAdminPanels(){
  document.getElementById('aStatVideos').textContent=videos.length;
  document.getElementById('aStatAlerts').textContent=[...customAlerts,...autoAlerts].length;
  document.getElementById('sec-fail-count').textContent=_pf;
  renderAdminVideoList();
  renderAdminAlerts();
}

function renderAdminVideoList(){
  const list=document.getElementById('aVideoList');if(!list)return;
  if(!videos.length){list.innerHTML='<div style="color:rgba(255,255,255,0.3);font-size:0.82rem;">No videos yet.</div>';return;}
  list.innerHTML=videos.map((v,i)=>`<div style="display:flex;align-items:center;gap:12px;padding:10px 0;border-bottom:1px solid rgba(124,58,237,0.08);">
    <div style="font-size:1.2rem;">${v.ytId?'üì∫':v.fileData?'üé¨':'üìπ'}</div>
    <div style="flex:1;"><div style="font-size:0.85rem;color:#fff;font-weight:500;">${v.title}</div><div style="font-size:0.65rem;color:rgba(139,92,246,0.6);letter-spacing:1px;">${v.cat} ¬∑ ${v.date}</div></div>
    <button class="admin-btn-red" style="padding:5px 12px;font-size:0.7rem;" onclick="deleteVideo(${i})"><i class="fas fa-trash"></i></button>
  </div>`).join('');
}

function renderAdminAlerts(){
  const list=document.getElementById('aAlertList');if(!list)return;
  const all=[...customAlerts,...autoAlerts];
  if(!all.length){list.innerHTML='<div style="color:rgba(255,255,255,0.3);font-size:0.82rem;">No active alerts.</div>';return;}
  list.innerHTML=all.map((a,i)=>`<div style="display:flex;align-items:center;gap:10px;padding:10px 0;border-bottom:1px solid rgba(124,58,237,0.08);">
    <div style="font-size:1rem;">‚ö†Ô∏è</div>
    <div style="flex:1;"><div style="font-size:0.85rem;color:#fff;">${a.title}</div><div style="font-size:0.65rem;color:rgba(139,92,246,0.6);">${a.sev.toUpperCase()} ¬∑ ${a.area}</div></div>
    ${i<customAlerts.length?`<button class="admin-btn-red" style="padding:5px 10px;font-size:0.7rem;" onclick="removeCustomAlert(${i})"><i class="fas fa-xmark"></i></button>`:'<span style="font-size:0.65rem;color:rgba(255,255,255,0.3);">AUTO</span>'}
  </div>`).join('');
}

// ‚îÄ‚îÄ ADMIN SITE EDITS ‚îÄ‚îÄ
function applySiteEdits(){
  const name=document.getElementById('edit-station-name').value.trim()||"Smokey's Weather Network";
  const tagline=document.getElementById('edit-tagline').value.trim();
  const emoji=document.getElementById('edit-logo-emoji').value.trim()||'üå©Ô∏è';
  document.getElementById('logoName').innerHTML=name.replace("'s","'s <span>").replace('Weather Network','Weather</span> Network');
  document.getElementById('logoTagline').textContent=tagline;
  document.getElementById('logoMark').textContent=emoji;
  document.title=name;
  const s=document.getElementById('site-edit-success');s.classList.add('show');setTimeout(()=>s.classList.remove('show'),2500);
}

function applyTickerEdit(){buildTicker(currentCity);}

function toggleAdminSetting(key,val){
  adminSettings[key]=val;localStorage.setItem('swn_admin_settings',JSON.stringify(adminSettings));
  if(key==='starsEnabled'){document.getElementById('starfield').style.opacity=val?'1':'0';}
  if(key==='particlesEnabled'&&!val){document.getElementById('rainWrap').style.opacity='0';document.getElementById('snowWrap').style.opacity='0';}
}

// ‚îÄ‚îÄ ADMIN VIDEO SAVE ‚îÄ‚îÄ
function adminSaveVideo(){
  const title=document.getElementById('av-title').value.trim();if(!title)return;
  const url=document.getElementById('av-url').value.trim();const file=document.getElementById('av-file').files[0];
  const cat=document.getElementById('av-cat').value;const desc=document.getElementById('av-desc').value.trim();
  const vid={title,cat,desc,date:new Date().toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'})};
  const ytMatch=url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]{11})/);
  if(ytMatch)vid.ytId=ytMatch[1];else if(url)vid.url=url;
  if(file){
    const reader=new FileReader();
    reader.onload=e=>{vid.fileData=e.target.result;videos.unshift(vid);saveVideos();renderVideos();['av-title','av-url','av-desc'].forEach(id=>document.getElementById(id).value='');document.getElementById('av-file').value='';};
    reader.readAsDataURL(file);return;
  }
  videos.unshift(vid);saveVideos();renderVideos();
  ['av-title','av-url','av-desc'].forEach(id=>document.getElementById(id).value='');document.getElementById('av-file').value='';
}

// ‚îÄ‚îÄ ADMIN ALERTS ‚îÄ‚îÄ
function publishCustomAlert(){
  const title=document.getElementById('ca-title').value.trim();if(!title)return;
  const a={title,sev:document.getElementById('ca-sev').value,area:document.getElementById('ca-area').value.trim()||'Your Area',body:document.getElementById('ca-body').value.trim()||'No additional details.',eff:document.getElementById('ca-eff').value.trim()||'Now',exp:document.getElementById('ca-exp').value.trim()||'Until further notice'};
  customAlerts.unshift(a);localStorage.setItem('swn_alerts',JSON.stringify(customAlerts));
  renderAlerts([...customAlerts,...autoAlerts]);renderAdminAlerts();
  const s=document.getElementById('alert-success');s.classList.add('show');setTimeout(()=>s.classList.remove('show'),2500);
  ['ca-title','ca-area','ca-body'].forEach(id=>document.getElementById(id).value='');
}
function removeCustomAlert(i){customAlerts.splice(i,1);localStorage.setItem('swn_alerts',JSON.stringify(customAlerts));renderAlerts([...customAlerts,...autoAlerts]);renderAdminAlerts();}
function clearAllAlerts(){customAlerts=[];localStorage.removeItem('swn_alerts');renderAlerts([...autoAlerts]);renderAdminAlerts();}

// ‚îÄ‚îÄ ADMIN NEWS ‚îÄ‚îÄ
function publishNewsStory(){
  const headline=document.getElementById('ns-headline').value.trim();if(!headline)return;
  const story={cat:document.getElementById('ns-cat').value,icon:document.getElementById('ns-icon').value.trim()||'üì∞',headline,snippet:document.getElementById('ns-body').value.trim().substring(0,200),time:'Just now',src:'Admin'};
  customNews.unshift(story);localStorage.setItem('swn_news',JSON.stringify(customNews));
  loadNews();
  const s=document.getElementById('news-success');s.classList.add('show');setTimeout(()=>s.classList.remove('show'),2500);
  ['ns-headline','ns-body'].forEach(id=>document.getElementById(id).value='');
}

// ‚îÄ‚îÄ CHANGE ADMIN PIN ‚îÄ‚îÄ
function changeAdminPIN(){
  const np=document.getElementById('new-pin-inp').value.trim();const cp=document.getElementById('confirm-pin-inp').value.trim();
  const err=document.getElementById('pin-change-err');
  err.style.display='none';
  if(!/^\d+$/.test(np)){err.textContent='PIN must be numeric only.';err.style.display='block';return;}
  if(np.length<6){err.textContent='PIN must be at least 6 digits.';err.style.display='block';return;}
  if(np!==cp){err.textContent='PINs do not match.';err.style.display='block';return;}
  _ph=_k(np);localStorage.setItem('swn_aph',_ph);
  document.getElementById(
